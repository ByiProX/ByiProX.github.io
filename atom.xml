<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Quentin&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://kunxiang.wang/"/>
  <updated>2020-03-01T14:46:06.974Z</updated>
  <id>http://kunxiang.wang/</id>
  
  <author>
    <name>ByiProX</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨</title>
    <link href="http://kunxiang.wang/2020/03/01/Python%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%AE%A1%E6%97%B6%E7%9A%84%E5%8A%9F%E8%83%BD%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    <id>http://kunxiang.wang/2020/03/01/Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨/</id>
    <published>2020-03-01T14:35:00.000Z</published>
    <updated>2020-03-01T14:46:06.974Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨"><a href="#Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨" class="headerlink" title="Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨"></a>Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨</h1><p>ä¸‹é¢çš„è£…é¥°å™¨clockä¼šæ‰“å°å‡½æ•°çš„è¿è¡Œæ—¶é—´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># descrbe.py</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clock</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="string">"""this is outer clock function"""</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @functools.wraps(func)  # --&gt; 4</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clocked</span><span class="params">(*args, **kwargs)</span>:</span>  <span class="comment"># -- 1</span></span><br><span class="line">        <span class="string">"""this is inner clocked function"""</span></span><br><span class="line">        start_time = time.time()</span><br><span class="line">        result = func(*args, **kwargs)  <span class="comment"># --&gt; 2</span></span><br><span class="line">        time_cost = time.time() - start_time</span><br><span class="line">        print(func.__name__ + <span class="string">" func time_cost -&gt; &#123;&#125;"</span>.format(time_cost))</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> clocked  <span class="comment"># --&gt; 3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@functools.lru_cache()  # --&gt; 5</span></span><br><span class="line"><span class="meta">@clock  # --&gt; 6</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="string">"""this is fibonacci function"""</span></span><br><span class="line">    <span class="keyword">return</span> n <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">else</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># å¦‚æœæœ‰ @functools.wraps(func)  # --&gt; 4 å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›çš„è¾“å‡ºæ˜¯è¿™æ ·çš„</span></span><br><span class="line">    fib(<span class="number">1</span>) <span class="comment"># è¾“å‡º fib func time_cost -&gt; 9.5367431640625e-07</span></span><br><span class="line">    print(fib.__name__)  <span class="comment"># è¾“å‡º fib</span></span><br><span class="line">    print(fib.__doc__)  <span class="comment"># è¾“å‡º this is fibonacci function</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¦‚æœæ²¡æœ‰@functools.wraps(func)  # --&gt; 4</span></span><br><span class="line">    fib(<span class="number">1</span>) <span class="comment"># è¾“å‡º fib func time_cost -&gt; 9.5367431640625e-07</span></span><br><span class="line">    print(fib.__name__)  <span class="comment"># è¾“å‡º clocked</span></span><br><span class="line">    print(fib.__doc__)  <span class="comment"># è¾“å‡º this is inner clocked function</span></span><br></pre></td></tr></table></figure><a id="more"></a><ol><li>å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨å‡½æ•°clockedï¼Œå®ƒæ¥å—ä»»æ„å®šä½å‚æ•°ä»¥åŠå…³é”®å­—å‚æ•°ã€‚</li><li>è¿™è¡Œä»£ç å¯ç”¨ï¼Œæ˜¯å› ä¸ºclockedçš„é—­åŒ…ä¸­åŒ…å«äº†è‡ªç”±å˜é‡funcã€‚</li><li>è¿”å›å†…éƒ¨çš„å‡½æ•°ï¼Œå–ä»£è¢«è£…é¥°çš„å‡½æ•°ã€‚</li><li>functools.wrapsæ˜¯æ ‡å‡†åº“ä¸­æ‹¿æ¥å³ç”¨çš„è£…é¥°å™¨ä¹‹ä¸€,å®ƒçš„ä½œç”¨æ˜¯ååŠ©æ„å»ºè¡Œä¸ºè‰¯å¥½çš„è£…é¥°å™¨ã€‚å¦‚æœä¸åŠ <code>functools.wraps(func)</code>, ä¼šé®ç›–è¢«è£…é¥°å‡½æ•°çš„<code>__name__</code>å’Œ<code>__doc__</code>å±æ€§ï¼Œ</li><li><p>functools.lru_cache()æ˜¯éå¸¸å®ç”¨çš„è£…é¥°å™¨ï¼Œå®ƒå®ç°äº†å¤‡å¿˜(memoization)åŠŸèƒ½ã€‚è¿™æ˜¯ä¸€é¡¹ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒæŠŠè€—æ—¶çš„å‡½æ•°çš„ç»“æœä¿å­˜èµ·æ¥ï¼Œé¿å…ä¼ å…¥ç›¸åŒçš„å‚æ•°æ—¶é‡å¤è®¡ç®—ã€‚LRUä¸‰ä¸ªå­—æ¯æ˜¯â€œLeast Recently Usedâ€çš„ç¼©å†™ï¼Œè¡¨æ˜ç¼“å­˜ä¸ä¼šæ— é™åˆ¶å¢é•¿ï¼Œä¸€æ®µæ—¶é—´ä¸ç”¨çš„ç¼“å­˜æ¡ç›®ä¼šè¢«æ‰”æ‰ã€‚è¿™æ ·å°±ä¼šæ˜¾è‘—æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚lru_cacheå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå¯é€‰çš„å‚æ•°æ¥é…ç½®ã€‚å®ƒçš„æ–¹æ³•ç­¾åæ˜¯<code>lru_cache(maxsize=128, typed=False)</code>ã€‚maxsizeå‚æ•°æŒ‡å®šå­˜å‚¨å¤šå°‘ä¸ªè°ƒç”¨çš„ç»“æœã€‚ç¼“å­˜æ»¡äº†ä¹‹åï¼Œæ—§çš„ç»“æœä¼šè¢«æ‰”æ‰ï¼Œè…¾å‡ºç©ºé—´ã€‚ä¸ºäº†å¾—åˆ°æœ€ä½³æ€§èƒ½ï¼Œmaxsizeåº”è¯¥è®¾ä¸º2çš„å¹‚ã€‚typedå‚æ•°å¦‚æœè®¾ä¸ºTrueï¼ŒæŠŠä¸åŒå‚æ•°ç±»å‹å¾—åˆ°çš„ç»“æœåˆ†å¼€ä¿å­˜ï¼Œå³æŠŠé€šå¸¸è®¤ä¸ºç›¸ç­‰çš„æµ®ç‚¹æ•°å’Œæ•´æ•°å‚æ•°(å¦‚ 1 å’Œ 1.0)åŒºåˆ†å¼€ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå› ä¸ºlru_cacheä½¿ç”¨å­—å…¸å­˜å‚¨ç»“æœï¼Œè€Œä¸”é”®æ ¹æ®è°ƒç”¨æ—¶ä¼ å…¥çš„å®šä½å‚æ•°å’Œå…³é”®å­—å‚æ•°åˆ›å»ºï¼Œæ‰€ä»¥è¢«lru_cacheè£…é¥°çš„å‡½æ•°ï¼Œå®ƒçš„æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æ˜¯å¯æ•£åˆ—çš„ã€‚</p></li><li><p>å®é™…ä¸Šè¯¥å¤„çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@clock  # --&gt; 6</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="string">"""this is fibonacci function"""</span></span><br><span class="line">    <span class="keyword">return</span> n <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">else</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li></ol><p>ç­‰ä»·äº<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fib = clock(fib)</span><br></pre></td></tr></table></figure></p><p>fibä¼šä½œä¸ºfuncå‚æ•°ä¼ ç»™clockã€‚ç„¶åï¼Œclockå‡½æ•°ä¼šè¿”å›clockedå‡½æ•°ï¼ŒPythonè§£é‡Šå™¨åœ¨èƒŒåä¼šæŠŠ clockedèµ‹å€¼ç»™fibã€‚å®é™…ä¸Šå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ·»åŠ <a href="mailto:`@functools.wraps" target="_blank" rel="noopener">`@functools.wraps</a>(func)`,æˆ‘ä»¬åœ¨ipythonä¸­å¯¼å…¥describeè¿›ä¸€æ­¥è§‚å¯Ÿï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> describe                                                                                                                  </span><br><span class="line">In [<span class="number">2</span>]: describe.fib.__name__        </span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">'clocked'</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œç°åœ¨fibä¿å­˜çš„æ˜¯ clocked å‡½æ•°çš„å¼•ç”¨ã€‚è‡ªæ­¤ä¹‹åï¼Œæ¯æ¬¡è°ƒç”¨ fib(n)ï¼Œæ‰§è¡Œçš„éƒ½æ˜¯ clocked(n)ã€‚clocked å¤§è‡´åšäº†ä¸‹é¢å‡ ä»¶äº‹ã€‚<br>(1) è®°å½•åˆå§‹æ—¶é—´ t0ã€‚<br>(2) è°ƒç”¨åŸæ¥çš„ fib å‡½æ•°ï¼Œä¿å­˜ç»“æœã€‚<br>(3) è®¡ç®—ç»è¿‡çš„æ—¶é—´ã€‚<br>(4) æ‰“å°å‡ºæ¥æ ¼å¼åŒ–æ”¶é›†çš„æ•°æ®<br>(5) è¿”å›ç¬¬ 2 æ­¥ä¿å­˜çš„ç»“æœã€‚<br>è¿™æ˜¯è£…é¥°å™¨çš„å…¸å‹è¡Œä¸º:æŠŠè¢«è£…é¥°çš„å‡½æ•°æ›¿æ¢æˆæ–°å‡½æ•°ï¼ŒäºŒè€…æ¥å—ç›¸åŒçš„å‚æ•°ï¼Œè€Œä¸”(é€šå¸¸)è¿”å›è¢«è£…é¥°çš„å‡½æ•°æœ¬è¯¥è¿”å›çš„å€¼ï¼ŒåŒæ—¶è¿˜ä¼šåšäº›é¢å¤–æ“ä½œã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨&quot;&gt;&lt;a href=&quot;#Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨&quot; class=&quot;headerlink&quot; title=&quot;Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨&quot;&gt;&lt;/a&gt;Pythonå®ç°ä¸€ä¸ªè®¡æ—¶çš„åŠŸèƒ½è£…é¥°å™¨&lt;/h1&gt;&lt;p&gt;ä¸‹é¢çš„è£…é¥°å™¨clockä¼šæ‰“å°å‡½æ•°çš„è¿è¡Œæ—¶é—´&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# descrbe.py&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; functools&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;clock&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(func)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;this is outer clock function&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;    @functools.wraps(func)  # --&amp;gt; 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;clocked&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(*args, **kwargs)&lt;/span&gt;:&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;# -- 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;this is inner clocked function&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        start_time = time.time()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result = func(*args, **kwargs)  &lt;span class=&quot;comment&quot;&gt;# --&amp;gt; 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        time_cost = time.time() - start_time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        print(func.__name__ + &lt;span class=&quot;string&quot;&gt;&quot; func time_cost -&amp;gt; &amp;#123;&amp;#125;&quot;&lt;/span&gt;.format(time_cost))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; clocked  &lt;span class=&quot;comment&quot;&gt;# --&amp;gt; 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@functools.lru_cache()  # --&amp;gt; 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@clock  # --&amp;gt; 6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;fib&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(n)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;this is fibonacci function&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; n &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; n &amp;lt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; fib(n - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) + fib(n - &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; __name__ == &lt;span class=&quot;string&quot;&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# å¦‚æœæœ‰ @functools.wraps(func)  # --&amp;gt; 4 å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›çš„è¾“å‡ºæ˜¯è¿™æ ·çš„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fib(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;# è¾“å‡º fib func time_cost -&amp;gt; 9.5367431640625e-07&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(fib.__name__)  &lt;span class=&quot;comment&quot;&gt;# è¾“å‡º fib&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(fib.__doc__)  &lt;span class=&quot;comment&quot;&gt;# è¾“å‡º this is fibonacci function&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# å¦‚æœæ²¡æœ‰@functools.wraps(func)  # --&amp;gt; 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fib(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;# è¾“å‡º fib func time_cost -&amp;gt; 9.5367431640625e-07&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(fib.__name__)  &lt;span class=&quot;comment&quot;&gt;# è¾“å‡º clocked&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print(fib.__doc__)  &lt;span class=&quot;comment&quot;&gt;# è¾“å‡º this is inner clocked function&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
  </entry>
  
  <entry>
    <title>ç®€è°ˆPython3ä¸­çš„é—­åŒ…</title>
    <link href="http://kunxiang.wang/2019/12/09/%E7%AE%80%E8%B0%88Python3%E4%B8%AD%E7%9A%84%E9%97%AD%E5%8C%85/"/>
    <id>http://kunxiang.wang/2019/12/09/ç®€è°ˆPython3ä¸­çš„é—­åŒ…/</id>
    <published>2019-12-09T15:10:14.000Z</published>
    <updated>2019-12-09T15:11:36.019Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šCodeWorks<br>é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·å…¬ä¼—å·ç•™è¨€ï¼Œæ¬¢è¿<code>éæŠ¬æ å¼</code>è®¨è®º</p></blockquote><p>é—­åŒ…æ˜¯æŒ‡<strong>å»¶ä¼¸äº†ä½œç”¨åŸŸ</strong>çš„å‡½æ•°ï¼Œå…¶ä¸­åŒ…å«å‡½æ•°å®šä¹‰ä½“ä¸­å¼•ç”¨ã€ä½†æ˜¯ä¸åœ¨å®šä¹‰ä½“ä¸­å®šä¹‰çš„<code>éå…¨å±€å˜é‡</code>ã€‚<br>é—­åŒ…(closure)æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„é‡è¦çš„è¯­æ³•ç»“æ„ã€‚é—­åŒ…ä¹Ÿæ˜¯ä¸€ç§ç»„ç»‡ä»£ç çš„ç»“æ„ï¼Œå®ƒåŒæ ·æé«˜äº†ä»£ç çš„å¯é‡å¤ä½¿ç”¨æ€§ã€‚</p><p>å½“ä¸€ä¸ªå†…åµŒå‡½æ•°å¼•ç”¨å…¶å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡,æˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªé—­åŒ…. æ€»ç»“ä¸€ä¸‹,<code>åˆ›å»ºä¸€ä¸ªé—­åŒ…å¿…é¡»æ»¡è¶³ä»¥ä¸‹å‡ ç‚¹</code>:</p><ol><li>å¿…é¡»æœ‰ä¸€ä¸ªå†…åµŒå‡½æ•°</li><li>å†…åµŒå‡½æ•°å¿…é¡»å¼•ç”¨å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡</li><li>å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯å†…åµŒå‡½æ•°</li></ol><p>é—­åŒ…æ˜¯ä¸€ç§å‡½æ•°ï¼Œå®ƒä¼šä¿ç•™å®šä¹‰å‡½æ•°æ—¶å­˜åœ¨çš„è‡ªç”±å˜é‡çš„ç»‘å®šï¼Œè¿™æ ·è°ƒç”¨å‡½æ•°æ—¶è™½ç„¶å®šä¹‰ä½œç”¨åŸŸä¸å¯ç”¨äº†ï¼Œä½†ä»èƒ½ä½¿ç”¨é‚£äº›ç»‘å®šã€‚</p><a id="more"></a><p>é—­åŒ…çš„æ¦‚å¿µéš¾ä»¥æŒæ¡ï¼Œä¸‹é¢é€šè¿‡ç¤ºä¾‹è¿›è¡Œç†è§£ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªè®¡ç®—<strong><code>ç§»åŠ¨å¹³å‡</code></strong>åŠŸèƒ½çš„ä»£ç ï¼Œå¦‚ä½•å®ç°å‘¢ï¼Ÿ</p><p>åˆå­¦è€…å¯èƒ½ä¼šç”¨<code>ç±»</code>æ¥å®ç°ï¼Œå¦‚ç¤ºä¾‹1:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Averager</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.series = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, new_value)</span>:</span></span><br><span class="line">        self.series.append(new_value)</span><br><span class="line">        total = sum(self.series)</span><br><span class="line">        <span class="keyword">return</span> total/len(self.series)</span><br></pre></td></tr></table></figure></p><p>Averageçš„å®ä¾‹æ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg = Averager()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg(<span class="number">10</span>)</span><br><span class="line"><span class="number">10.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg(<span class="number">11</span>)</span><br><span class="line"><span class="number">10.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg(<span class="number">12</span>)</span><br><span class="line"><span class="number">11.0</span></span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢ä½¿ç”¨<code>å‡½æ•°å¼</code>å®ç°ï¼Œå¦‚ç¤ºä¾‹2:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_averager</span><span class="params">()</span>:</span></span><br><span class="line">    series = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">averager</span><span class="params">(new_value)</span>:</span></span><br><span class="line">        series.append(new_value)</span><br><span class="line">        total = sum(series)</span><br><span class="line">        <span class="keyword">return</span> total/len(series)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> averager</span><br></pre></td></tr></table></figure></p><p>è°ƒç”¨make_averageræ—¶ï¼Œè¿”å›ä¸€ä¸ªaveragerå‡½æ•°å¯¹è±¡ã€‚æ¯æ¬¡è°ƒç”¨averageræ—¶ï¼Œè¯¥å¯¹è±¡ä¼šæŠŠå‚æ•°æ·»åŠ åˆ°seriesä¸­ï¼Œç„¶åè®¡ç®—å½“å‰å¹³å‡å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg = make_averager()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg(<span class="number">10</span>)</span><br><span class="line"><span class="number">10.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg(<span class="number">11</span>)</span><br><span class="line"><span class="number">10.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg(<span class="number">12</span>)</span><br><span class="line"><span class="number">11.0</span></span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šä¸¤ä¸ªç¤ºä¾‹æœ‰å…±é€šä¹‹å¤„ï¼šè°ƒç”¨Averager()æˆ–make_averager()å¾—åˆ°ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡avgï¼Œè¯¥å¯¹è±¡ä¼šæ›´æ–°å†å²å€¼ï¼Œç„¶åè®¡ç®—å½“å‰å‡å€¼ã€‚ç¤ºä¾‹1ä¸­ï¼Œavgæ˜¯Averagerçš„å®ä¾‹ï¼›å®ä¾‹2ä¸­æ˜¯å†…éƒ¨å‡½æ•°averagerã€‚ä¸ç®¡æ€æ ·ï¼Œæˆ‘ä»¬éƒ½åªéœ€è¦è°ƒç”¨avg(n)ï¼ŒæŠŠnæ”¾å…¥ç³»åˆ—å€¼seriesä¸­ï¼Œç„¶åé‡æ–°è®¡ç®—å‡å€¼ã€‚</p><p>Averager()ç±»çš„å®ä¾‹avgåœ¨å“ªé‡Œå­˜å‚¨å†å²å€¼å¾ˆæ˜æ˜¾ï¼Œ<code>ä½†æ˜¯ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­çš„avgå‡½æ•°åœ¨å“ªé‡Œå¯»æ‰¾serieså‘¢</code>ï¼Ÿ</p><p>æ³¨æ„ï¼Œseriesæ˜¯make_averagerå‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œå› ä¸ºé‚£ä¸ªå‡½æ•°çš„å®šä¹‰ä½“ä¸­åˆå§‹åŒ–äº†<code>series = []</code>ã€‚å¯æ˜¯ï¼Œè°ƒç”¨avg(10)æ—¶ï¼Œmake_averagerå‡½æ•°å·²ç»è¿”å›äº†ï¼Œè€Œä»–çš„æœ¬åœ°ä½œç”¨åŸŸä¹Ÿä¸€å»ä¸å¤è¿”äº†ã€‚</p><p>åœ¨averagerå‡½æ•°ä¸­ï¼Œseriesæ˜¯<code>è‡ªç”±å˜é‡</code>ï¼ŒæŒ‡æœªåœ¨æœ¬åœ°ä½œç”¨åŸŸä¸­ç»‘å®šçš„å˜é‡ï¼Œå›¾å½¢åŒ–å±•ç¤ºå¦‚ä¸‹ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/2952111-3249d24d6da9aa8b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é—­åŒ…"></p><p><strong>averagerçš„é—­åŒ…å»¶ä¼¸åˆ°é‚£ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸä¹‹å¤–ï¼ŒåŒ…å«å¯¹è‡ªç”±å˜é‡seriesçš„ç»‘å®š</strong></p><p>æˆ‘ä»¬å¯ä»¥å®¡æŸ¥è¿”å›çš„averagerå¯¹è±¡ï¼Œå‘ç°Pythonåœ¨<code>__code__</code>å±æ€§ï¼ˆè¡¨ç¤ºç¼–è¯‘åçš„å‡½æ•°å®šä¹‰ä½“ï¼‰ä¸­ä¿å­˜å±€éƒ¨å˜é‡å’Œè‡ªç”±å˜é‡çš„åç§°ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®¡æŸ¥make_averageråˆ›å»ºçš„å‡½æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg.__code__.co_varnames</span><br><span class="line">(<span class="string">'new_value'</span>, <span class="string">'total'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg.__code__.co_freevars</span><br><span class="line">(<span class="string">'series'</span>,)</span><br></pre></td></tr></table></figure><p>seriesç»‘å®šåœ¨è¿”å›çš„avgå‡½æ•°çš„<code>__closure__</code>å±æ€§ä¸­ã€‚<code>avg.__closure__</code>ä¸­å„ä¸ªå…ƒç´ å¯¹åº”äº<code>avg.__code__.co_freevars</code>ä¸­çš„ä¸€ä¸ªåç§°ã€‚è¿™äº›å…ƒç´ æ˜¯cellå¯¹è±¡ï¼Œæœ‰ä¸ª<code>cell_content</code>å±æ€§ï¼Œä¿å­˜ç€çœŸæ­£çš„å€¼ã€‚è¿™äº›å±æ€§çš„å€¼å¦‚ç¤ºä¾‹æ‰€ç¤ºï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg.__code__.co_freevars</span><br><span class="line">(<span class="string">'series'</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg.__closure__</span><br><span class="line">(&lt;cell at <span class="number">0x108b89828</span>: list object at <span class="number">0x108ae96c8</span>&gt;,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>avg.__closure__[<span class="number">0</span>].cell_contents</span><br><span class="line">[<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]</span><br></pre></td></tr></table></figure></p><p>ç»¼ä¸Šï¼Œ<code>é—­åŒ…æ˜¯ä¸€ç§å‡½æ•°ï¼Œå®ƒä¼šä¿ç•™å®šä¹‰å‡½æ•°æ—¶å­˜åœ¨çš„è‡ªç”±å˜é‡çš„ç»‘å®šï¼Œè¿™æ ·è°ƒç”¨å‡½æ•°æ—¶è™½ç„¶å®šä¹‰ä½œç”¨åŸŸä¸å¯ç”¨äº†ï¼Œä½†ä»èƒ½ä½¿ç”¨é‚£äº›ç»‘å®š</code>ã€‚</p><p>ç¨å¾®æœ‰ç‚¹ç¼–ç¨‹ç»éªŒçš„äººä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬å®ç°çš„è®¡ç®—ç§»åŠ¨å¹³å‡å€¼å¾—æ–¹æ³•å®é™…ä¸Šæœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´ï¼Œåœ¨åé¢çš„ä»‹ç»ä¸­ä¼šè¿›è¡Œæ”¹è¿›ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šCodeWorks&lt;br&gt;é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·å…¬ä¼—å·ç•™è¨€ï¼Œæ¬¢è¿&lt;code&gt;éæŠ¬æ å¼&lt;/code&gt;è®¨è®º&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é—­åŒ…æ˜¯æŒ‡&lt;strong&gt;å»¶ä¼¸äº†ä½œç”¨åŸŸ&lt;/strong&gt;çš„å‡½æ•°ï¼Œå…¶ä¸­åŒ…å«å‡½æ•°å®šä¹‰ä½“ä¸­å¼•ç”¨ã€ä½†æ˜¯ä¸åœ¨å®šä¹‰ä½“ä¸­å®šä¹‰çš„&lt;code&gt;éå…¨å±€å˜é‡&lt;/code&gt;ã€‚&lt;br&gt;é—­åŒ…(closure)æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„é‡è¦çš„è¯­æ³•ç»“æ„ã€‚é—­åŒ…ä¹Ÿæ˜¯ä¸€ç§ç»„ç»‡ä»£ç çš„ç»“æ„ï¼Œå®ƒåŒæ ·æé«˜äº†ä»£ç çš„å¯é‡å¤ä½¿ç”¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªå†…åµŒå‡½æ•°å¼•ç”¨å…¶å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡,æˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªé—­åŒ…. æ€»ç»“ä¸€ä¸‹,&lt;code&gt;åˆ›å»ºä¸€ä¸ªé—­åŒ…å¿…é¡»æ»¡è¶³ä»¥ä¸‹å‡ ç‚¹&lt;/code&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¿…é¡»æœ‰ä¸€ä¸ªå†…åµŒå‡½æ•°&lt;/li&gt;
&lt;li&gt;å†…åµŒå‡½æ•°å¿…é¡»å¼•ç”¨å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡&lt;/li&gt;
&lt;li&gt;å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯å†…åµŒå‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é—­åŒ…æ˜¯ä¸€ç§å‡½æ•°ï¼Œå®ƒä¼šä¿ç•™å®šä¹‰å‡½æ•°æ—¶å­˜åœ¨çš„è‡ªç”±å˜é‡çš„ç»‘å®šï¼Œè¿™æ ·è°ƒç”¨å‡½æ•°æ—¶è™½ç„¶å®šä¹‰ä½œç”¨åŸŸä¸å¯ç”¨äº†ï¼Œä½†ä»èƒ½ä½¿ç”¨é‚£äº›ç»‘å®šã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
      <category term="Python3 é—­åŒ…" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/Python3-%E9%97%AD%E5%8C%85/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
  </entry>
  
  <entry>
    <title>ç®€è¿°Pythonä¸­å˜é‡ä½œç”¨åŸŸçš„è§„åˆ™</title>
    <link href="http://kunxiang.wang/2019/12/07/%E7%AE%80%E8%BF%B0Python%E4%B8%AD%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E8%A7%84%E5%88%99/"/>
    <id>http://kunxiang.wang/2019/12/07/ç®€è¿°Pythonä¸­å˜é‡ä½œç”¨åŸŸçš„è§„åˆ™/</id>
    <published>2019-12-07T15:22:52.000Z</published>
    <updated>2019-12-10T01:42:49.633Z</updated>
    
    <content type="html"><![CDATA[<p>ä»‹ç»è¿™ä¸€é¢˜ç›®çš„ç›®çš„æ˜¯å¼•å‡ºpythonä¸­è¾ƒä¸ºé«˜çº§çš„è¯é¢˜â€”é—­åŒ…å’Œè£…é¥°å™¨ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®šä¹‰å¹¶æµ‹è¯•ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¯»å–ä¸¤ä¸ªå˜é‡çš„å€¼:ä¸€ä¸ªæ˜¯å±€éƒ¨å˜é‡aï¼Œæ˜¯å‡½æ•°çš„å‚æ•°ï¼› å¦ä¸€ä¸ªæ˜¯å˜é‡bï¼Œè¿™ä¸ªå‡½æ•°æ²¡æœ‰å®šä¹‰å®ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(a)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(a)</span><br><span class="line"><span class="meta">... </span>    print(b)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">3</span>, <span class="keyword">in</span> f1</span><br><span class="line">NameError: name <span class="string">'b'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure><p>å‡ºç°æ­¤ç»“æœå®Œå…¨åœ¨æ„æ–™èŒƒå›´å†…ï¼Œå› ä¸ºæˆ‘ä»¬å‹æ ¹ä»æ¥æ²¡æœ‰å®šä¹‰è¿‡å˜é‡bã€‚å¦‚æœæˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°f1å‰å®šä¹‰å˜é‡bï¼Œé‚£ä¹ˆä¸ä¼šå­˜åœ¨é—®é¢˜ï¼Œå› ä¸ºæ­¤å¤„çš„bæ˜¯<code>å…¨å±€å˜é‡</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ¥ä¸€ä¸ªè¾ƒä¸ºç‰¹æ®Šçš„ä¾‹å­<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(a)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(a)</span><br><span class="line"><span class="meta">... </span>    print(b)</span><br><span class="line"><span class="meta">... </span>    b=<span class="number">3</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">3</span>, <span class="keyword">in</span> f2</span><br><span class="line">UnboundLocalError: local variable <span class="string">'b'</span> referenced before assignment</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°åœ¨èµ‹å€¼ä¹‹å‰ï¼Œç¬¬äºŒä¸ªprintå¤±è´¥äº†ï¼Œ<code>æç¤ºå±€éƒ¨å˜é‡båœ¨èµ‹å€¼å‰è¢«å¼•ç”¨äº†</code>ã€‚</p><p>å®é™…ä¸Šï¼ŒPython ç¼–è¯‘å‡½æ•°çš„å®šä¹‰ä½“æ—¶ï¼Œå®ƒåˆ¤æ–­ b æ˜¯å±€éƒ¨å˜é‡ï¼Œå› ä¸ºåœ¨å‡½æ•°ä¸­ç»™å®ƒèµ‹å€¼äº†ã€‚ç”Ÿæˆçš„å­—èŠ‚ç è¯å®äº†è¿™ç§åˆ¤æ–­ï¼ˆåé¢ä¼šè®¨è®ºï¼‰ï¼ŒPython ä¼šå°è¯•ä»æœ¬åœ°ç¯å¢ƒè·å– bã€‚åé¢è°ƒç”¨f2(1)æ—¶ï¼Œf2çš„å®šä¹‰ä½“ä¼šè·å–å¹¶æ‰“å°å±€éƒ¨å˜é‡ a çš„å€¼ï¼Œä½†æ˜¯å°è¯•è·å–å±€éƒ¨å˜é‡ b çš„å€¼æ—¶ï¼Œå‘ç° b æ²¡æœ‰ç»‘å®šå€¼ã€‚</p><p>è¿™æ˜¯Pythonçš„è®¾è®¡é€‰æ‹©ï¼šPythonä¸è¦æ±‚å£°æ˜å˜é‡ç±»å‹ï¼Œä½†æ˜¯é»˜è®¤åœ¨å‡½æ•°å®šä¹‰ä½“ä¸­èµ‹å€¼çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ã€‚å¦‚æœåœ¨å‡½æ•°ä¸­èµ‹å€¼æ—¶æƒ³è®©è§£é‡Šå™¨æŠŠ b å½“æˆå…¨å±€å˜é‡ï¼Œè¦ä½¿ç”¨ <code>global</code> å£°æ˜ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f3</span><span class="params">(a)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">global</span> b</span><br><span class="line"><span class="meta">... </span>    print(a)</span><br><span class="line"><span class="meta">... </span>    print(b)</span><br><span class="line"><span class="meta">... </span>    b=<span class="number">3</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=<span class="number">30</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">30</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">30</span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹f1å’Œf2çš„å­—èŠ‚ç ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dis(f1)</span><br><span class="line">  <span class="number">2</span>           <span class="number">0</span> LOAD_GLOBAL      <span class="number">0</span> (<span class="keyword">print</span>)  &gt;&gt;&gt; <span class="number">1</span></span><br><span class="line">              <span class="number">2</span> LOAD_FAST        <span class="number">0</span> (a)      &gt;&gt;&gt; <span class="number">2</span></span><br><span class="line">              <span class="number">4</span> CALL_FUNCTION    <span class="number">1</span></span><br><span class="line">              <span class="number">6</span> POP_TOP</span><br><span class="line"></span><br><span class="line">  <span class="number">3</span>           <span class="number">8</span> LOAD_GLOBAL      <span class="number">0</span> (<span class="keyword">print</span>)</span><br><span class="line">             <span class="number">10</span> LOAD_GLOBAL      <span class="number">1</span> (b)      &gt;&gt;&gt; <span class="number">3</span></span><br><span class="line">             <span class="number">12</span> CALL_FUNCTION    <span class="number">1</span></span><br><span class="line">             <span class="number">14</span> POP_TOP</span><br><span class="line">             <span class="number">16</span> LOAD_CONST       <span class="number">0</span> (<span class="keyword">None</span>)</span><br><span class="line">             <span class="number">18</span> RETURN_VALUE</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dis(f2)</span><br><span class="line">  <span class="number">2</span>           <span class="number">0</span> LOAD_GLOBAL      <span class="number">0</span> (<span class="keyword">print</span>)</span><br><span class="line">              <span class="number">2</span> LOAD_FAST        <span class="number">0</span> (a)</span><br><span class="line">              <span class="number">4</span> CALL_FUNCTION    <span class="number">1</span></span><br><span class="line">              <span class="number">6</span> POP_TOP</span><br><span class="line"></span><br><span class="line">  <span class="number">3</span>           <span class="number">8</span> LOAD_GLOBAL      <span class="number">0</span> (<span class="keyword">print</span>)</span><br><span class="line">             <span class="number">10</span> LOAD_FAST        <span class="number">1</span> (b)      &gt;&gt;&gt; <span class="number">4</span></span><br><span class="line">             <span class="number">12</span> CALL_FUNCTION    <span class="number">1</span></span><br><span class="line">             <span class="number">14</span> POP_TOP</span><br><span class="line"></span><br><span class="line">  <span class="number">4</span>          <span class="number">16</span> LOAD_CONST       <span class="number">1</span> (<span class="number">3</span>)</span><br><span class="line">             <span class="number">18</span> STORE_FAST       <span class="number">1</span> (b)</span><br><span class="line">             <span class="number">20</span> LOAD_CONST       <span class="number">0</span> (<span class="keyword">None</span>)</span><br><span class="line">             <span class="number">22</span> RETURN_VALUE</span><br></pre></td></tr></table></figure></p><p><img src="https://upload-images.jianshu.io/upload_images/2952111-8e292da51753cfef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2019-12-07 at 17.10.03.png"></p><p>å¯¹äºf1å‡½æ•°çš„åæ±‡ç¼–ï¼š</p><ol><li>LOAD_GLOBALåŠ è½½å…¨å±€åç§° printã€‚</li><li>LOAD_FASTåŠ è½½æœ¬åœ°åç§° aã€‚</li><li>LOAD_GLOBALåŠ è½½å…¨å±€åç§° bã€‚</li></ol><p>å¯¹äºf2å‡½æ•°çš„åæ±‡ç¼–ï¼š</p><ol><li>LOAD_FASTåŠ è½½æœ¬åœ°åç§° bã€‚è¿™è¡¨æ˜ï¼Œç¼–è¯‘å™¨æŠŠ b è§†ä½œ<code>å±€éƒ¨å˜é‡</code>ï¼Œå³ä½¿åœ¨åé¢æ‰ä¸º b èµ‹å€¼ã€‚</li></ol><p>å¯¹äºå‡½æ•°f3çš„åæ±‡ç¼–å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°å˜é‡bä¸ºå…¨å±€å˜é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dis(f3)</span><br><span class="line">  <span class="number">3</span>          <span class="number">0</span> LOAD_GLOBAL      <span class="number">0</span> (<span class="keyword">print</span>)</span><br><span class="line">             <span class="number">2</span> LOAD_FAST        <span class="number">0</span> (a)</span><br><span class="line">             <span class="number">4</span> CALL_FUNCTION    <span class="number">1</span></span><br><span class="line">             <span class="number">6</span> POP_TOP</span><br><span class="line"></span><br><span class="line">  <span class="number">4</span>          <span class="number">8</span> LOAD_GLOBAL      <span class="number">0</span> (<span class="keyword">print</span>)</span><br><span class="line">            <span class="number">10</span> LOAD_GLOBAL      <span class="number">1</span> (b)  &gt;&gt;&gt; ***</span><br><span class="line">            <span class="number">12</span> CALL_FUNCTION    <span class="number">1</span></span><br><span class="line">            <span class="number">14</span> POP_TOP</span><br><span class="line"></span><br><span class="line">  <span class="number">5</span>         <span class="number">16</span> LOAD_CONST       <span class="number">1</span> (<span class="number">3</span>)</span><br><span class="line">            <span class="number">18</span> STORE_GLOBAL     <span class="number">1</span> (b)</span><br><span class="line">            <span class="number">20</span> LOAD_CONST       <span class="number">0</span> (<span class="keyword">None</span>)</span><br><span class="line">            <span class="number">22</span> RETURN_VALUE</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/2952111-9f820de0acd3270c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2019-12-07 at 17.30.33.png"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åŸºæœ¬äº†è§£pythonå‡½æ•°ä¸­å˜é‡ä½œç”¨åŸŸçš„é—®é¢˜ï¼Œè¿™å°†ä¸ºåé¢ä»‹ç»çš„é—­åŒ…å’Œè£…é¥°å™¨çš„å­¦ä¹ æ‰“ä¸‹åŸºç¡€ã€‚</p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»‹ç»è¿™ä¸€é¢˜ç›®çš„ç›®çš„æ˜¯å¼•å‡ºpythonä¸­è¾ƒä¸ºé«˜çº§çš„è¯é¢˜â€”é—­åŒ…å’Œè£…é¥°å™¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®šä¹‰å¹¶æµ‹è¯•ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¯»å–ä¸¤ä¸ªå˜é‡çš„å€¼:ä¸€ä¸ªæ˜¯å±€éƒ¨å˜é‡aï¼Œæ˜¯å‡½æ•°çš„å‚æ•°ï¼› å¦ä¸€ä¸ªæ˜¯å˜é‡bï¼Œè¿™ä¸ªå‡½æ•°æ²¡æœ‰å®šä¹‰å®ƒã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight py
      
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
      <category term="Python3 é—­åŒ…" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/Python3-%E9%97%AD%E5%8C%85/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨Emojiè§£é‡Šç¼–ç¨‹è¯­è¨€ä¸­çš„mapã€filterã€reduce</title>
    <link href="http://kunxiang.wang/2019/11/27/%E7%94%A8Emoji%E8%A7%A3%E9%87%8A%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84map%E3%80%81filter%E3%80%81reduce/"/>
    <id>http://kunxiang.wang/2019/11/27/ç”¨Emojiè§£é‡Šç¼–ç¨‹è¯­è¨€ä¸­çš„mapã€filterã€reduce/</id>
    <published>2019-11-27T08:44:01.000Z</published>
    <updated>2019-11-27T08:45:59.105Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map(cook, [ğŸŒ½, ğŸ¥”, ğŸ¥, ğŸ®])</span><br><span class="line">===&gt; [ğŸ¿, ğŸŸ, ğŸ—, ğŸ¥©]</span><br><span class="line"></span><br><span class="line">filter(isMeat, [ğŸ¿, ğŸŸ, ğŸ—, ğŸ¥©])</span><br><span class="line">===&gt; [ğŸ—, ğŸ¥©]</span><br><span class="line"></span><br><span class="line">reduce(afterEat, [ğŸ¿, ğŸŸ, ğŸ—, ğŸ¥©])</span><br><span class="line">===&gt; ğŸ’©</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line
      
    
    </summary>
    
      <category term="Funny" scheme="http://kunxiang.wang/categories/Funny/"/>
    
    
      <category term="Funny" scheme="http://kunxiang.wang/tags/Funny/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¼˜é›…æ»´åœ¨æ‰‹æœºä¸Šè·‘Pythonä»£ç </title>
    <link href="http://kunxiang.wang/2019/11/15/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E6%BB%B4%E5%9C%A8%E6%89%8B%E6%9C%BA%E4%B8%8A%E8%B7%91Python%E4%BB%A3%E7%A0%81/"/>
    <id>http://kunxiang.wang/2019/11/15/å¦‚ä½•ä¼˜é›…æ»´åœ¨æ‰‹æœºä¸Šè·‘Pythonä»£ç /</id>
    <published>2019-11-15T01:10:12.000Z</published>
    <updated>2019-11-15T09:13:47.266Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡é‡ç‚¹å›´ç»•è‹¹æœè®¾å¤‡ï¼Œç»™å¤§å®¶æè¿°ä¸€ä¸‹å°ç¼–è‡ªå·±å¦‚ä½•åœ¨è‹¹æœç§»åŠ¨è®¾å¤‡ä¸Šç©è½¬Pythonä»£ç çš„ã€‚æŒ‰ç…§æ¨èæŒ‡æ•°ç”±é«˜åˆ°ä½ç»™å¤§å®¶æ¨èç›¸å…³å·¥å…·ã€‚</p><h3 id="Pythonista"><a href="#Pythonista" class="headerlink" title="Pythonista"></a>Pythonista</h3><p>ä¸ä¸€èˆ¬çš„pythonç§»åŠ¨ç«¯è½¯ä»¶ä¸åŒï¼Œå®ƒæ˜¯ä¸€æ¬¾å®‰è£…åœ¨æ‰‹æœºä¸Šçš„Python IDEè½¯ä»¶ï¼Œæ¨èæŒ‡æ•°4.5æ˜Ÿã€‚æ‰£æ‰çš„0.5æ˜Ÿæ˜¯å› ä¸ºè½¯ä»¶ç•¥è´µï¼ˆ9.99åˆ€ï¼‰ã€‚</p><p>è¯¥è½¯ä»¶å¯ä»¥åœ¨è‹¹æœç§»åŠ¨è®¾å¤‡ä¸Šæä¾›å‡ ä¹å®Œæ•´çš„Pythonå¼€å‘ç¯å¢ƒï¼Œè½¯ä»¶é‡Œæœ‰å¾ˆå¤šçš„demoç¨‹åºï¼ŒåŒ…æ‹¬äº†æ¸¸æˆã€æ•°æ®å¤„ç†ã€å›¾ç‰‡å¤„ç†ç­‰ã€‚è¯´å®è¯ï¼Œæœ¬äººè§‰å¾—å…‰è¿™äº›demoä»£ç å°±å€¼è¿™ä¸ªä»·æ ¼äº†ã€‚è½¯ä»¶é™¤äº†æ”¯æŒæ ‡å‡†Pythonåº“ä»¥å¤–ï¼Œè¿˜æ”¯æŒå¾ˆå¤šå¸¸ç”¨çš„ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚ç”¨äºç§‘å­¦è®¡ç®—çš„Numpyå’Œç»˜å›¾åŒ…matplotlibã€ç”¨äºhttpè¯·æ±‚çš„Requestsç­‰ã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è½¯ä»¶ä¸­å†™è„šæœ¬è°ƒç”¨æ‰‹æœºæ¥å£ï¼Œè·å¾—æ¥åˆ‡æ¿ã€è”ç³»äººã€ä½ç½®ä¿¡æ¯ç­‰ï¼ŒåŠŸèƒ½ç‹ å¼ºå¤§ï¼Œç­‰å¾…ç›†å‹èŒå‰å»ä½“éªŒã€‚<br><img src="https://img-blog.csdnimg.cn/20191115114946949.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><a id="more"></a><h3 id="Python-ai"><a href="#Python-ai" class="headerlink" title="Python ai"></a>Python ai</h3><p>è¿™æ¬¾è½¯ä»¶å¯ä»¥ç»™4.4é¢—æ˜Ÿï¼Œä¹Ÿæ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„è½¯ä»¶ã€‚è¯´å…¶ä¼˜ç§€ï¼Œä½“ç°åœ¨è¿™ä¹ˆå‡ ç‚¹:</p><ul><li>è½¯ä»¶å…è´¹ï¼Œæ²¡æœ‰å¹¿å‘Šï¼Œå®åœ¨æ˜¯æƒ…æ€€è‰¯å¿ƒä¹‹ä½œ</li><li>ç¦»çº¿IDEç¯å¢ƒ</li><li>æ”¯æŒå¾ˆå¤šç§‘å­¦è®¡ç®—çš„ä¸‰æ–¹åº“</li><li>æ”¯æŒpipå®‰è£…ä¸‰æ–¹åº“<br><img src="https://img-blog.csdnimg.cn/20191115115022887.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ul><h3 id="Pydriod"><a href="#Pydriod" class="headerlink" title="Pydriod"></a>Pydriod</h3><p>å°±Python IDEæ¥è¯´ï¼Œå®‰å“ç«¯çš„è½¯ä»¶è·Ÿè‹¹æœç«¯è½¯ä»¶ç›¸æ¯”è¿˜æ˜¯å·®çš„æŒºå¤šçš„ã€‚æ­¤å¤„æ¨èPydriodï¼Œç»™4é¢—æ˜Ÿå§ã€‚è²Œä¼¼å¾ˆå¤šåº”ç”¨å•†åº—æ‰¾ä¸åˆ°ï¼Œå¦‚æœå¯ä»¥é¡ºåˆ©FQï¼Œæ¨èå»Google Playä¸‹è½½ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20191115115210695.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œç§»åŠ¨ç«¯Python IDEè½¯ä»¶æœ‰å¾ˆå¤šï¼Œå¯¹äºè‹¹æœç«¯ï¼Œå°ç¼–å¤§éƒ¨åˆ†å·²ç»ä¸‹è½½ä½“éªŒè¿‡ï¼Œè‡ªè®¤ä¸ºè¿˜æ˜¯å¾ˆæœ‰å‘è¨€æƒçš„ï¼Œæ­¤å¤„æ¨èçš„éƒ½æ˜¯<strong>æœ¬åœ°IDE</strong>çš„èƒ½å¦‚æˆ‘æ³•çœ¼çš„Pythonè½¯ä»¶ã€‚å…¶å®è¿˜æœ‰ä¸€äº›è½¯ä»¶ä½¿ç”¨çš„æ˜¯<strong>è¿œç¨‹IDE</strong>ï¼Œä¾‹å¦‚è‹¹æœå’Œå®‰å“ç«¯çš„PythonJamï¼Œä½“éªŒè¿˜ç®—OKï¼Œæ„Ÿå…´è¶£å¤§å®¶å¯ä»¥ä¸‹è½½å°è¯•ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡é‡ç‚¹å›´ç»•è‹¹æœè®¾å¤‡ï¼Œç»™å¤§å®¶æè¿°ä¸€ä¸‹å°ç¼–è‡ªå·±å¦‚ä½•åœ¨è‹¹æœç§»åŠ¨è®¾å¤‡ä¸Šç©è½¬Pythonä»£ç çš„ã€‚æŒ‰ç…§æ¨èæŒ‡æ•°ç”±é«˜åˆ°ä½ç»™å¤§å®¶æ¨èç›¸å…³å·¥å…·ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Pythonista&quot;&gt;&lt;a href=&quot;#Pythonista&quot; class=&quot;headerlink&quot; title=&quot;Pythonista&quot;&gt;&lt;/a&gt;Pythonista&lt;/h3&gt;&lt;p&gt;ä¸ä¸€èˆ¬çš„pythonç§»åŠ¨ç«¯è½¯ä»¶ä¸åŒï¼Œå®ƒæ˜¯ä¸€æ¬¾å®‰è£…åœ¨æ‰‹æœºä¸Šçš„Python IDEè½¯ä»¶ï¼Œæ¨èæŒ‡æ•°4.5æ˜Ÿã€‚æ‰£æ‰çš„0.5æ˜Ÿæ˜¯å› ä¸ºè½¯ä»¶ç•¥è´µï¼ˆ9.99åˆ€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥è½¯ä»¶å¯ä»¥åœ¨è‹¹æœç§»åŠ¨è®¾å¤‡ä¸Šæä¾›å‡ ä¹å®Œæ•´çš„Pythonå¼€å‘ç¯å¢ƒï¼Œè½¯ä»¶é‡Œæœ‰å¾ˆå¤šçš„demoç¨‹åºï¼ŒåŒ…æ‹¬äº†æ¸¸æˆã€æ•°æ®å¤„ç†ã€å›¾ç‰‡å¤„ç†ç­‰ã€‚è¯´å®è¯ï¼Œæœ¬äººè§‰å¾—å…‰è¿™äº›demoä»£ç å°±å€¼è¿™ä¸ªä»·æ ¼äº†ã€‚è½¯ä»¶é™¤äº†æ”¯æŒæ ‡å‡†Pythonåº“ä»¥å¤–ï¼Œè¿˜æ”¯æŒå¾ˆå¤šå¸¸ç”¨çš„ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚ç”¨äºç§‘å­¦è®¡ç®—çš„Numpyå’Œç»˜å›¾åŒ…matplotlibã€ç”¨äºhttpè¯·æ±‚çš„Requestsç­‰ã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è½¯ä»¶ä¸­å†™è„šæœ¬è°ƒç”¨æ‰‹æœºæ¥å£ï¼Œè·å¾—æ¥åˆ‡æ¿ã€è”ç³»äººã€ä½ç½®ä¿¡æ¯ç­‰ï¼ŒåŠŸèƒ½ç‹ å¼ºå¤§ï¼Œç­‰å¾…ç›†å‹èŒå‰å»ä½“éªŒã€‚&lt;br&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191115114946949.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Tools" scheme="http://kunxiang.wang/categories/Tools/"/>
    
    
      <category term="Tools" scheme="http://kunxiang.wang/tags/Tools/"/>
    
  </entry>
  
  <entry>
    <title>Pythonä¸­å¦‚ä½•ä¼˜é›…çš„ä½¿ç”¨assertæ–­è¨€</title>
    <link href="http://kunxiang.wang/2019/11/14/Python%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8assert%E6%96%AD%E8%A8%80/"/>
    <id>http://kunxiang.wang/2019/11/14/Pythonä¸­å¦‚ä½•ä¼˜é›…çš„ä½¿ç”¨assertæ–­è¨€/</id>
    <published>2019-11-14T09:04:42.000Z</published>
    <updated>2019-11-15T01:10:55.336Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯assertæ–­è¨€"><a href="#ä»€ä¹ˆæ˜¯assertæ–­è¨€" class="headerlink" title="ä»€ä¹ˆæ˜¯assertæ–­è¨€"></a>ä»€ä¹ˆæ˜¯assertæ–­è¨€</h3><blockquote><p>Assert statements are a convenient way to insert debugging assertions into a program</p></blockquote><p>æ–­è¨€å£°æ˜æ˜¯ç”¨äºç¨‹åºè°ƒè¯•çš„ä¸€ä¸ªä¾¿æ·æ–¹å¼ã€‚æ–­è¨€å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªdebugå·¥å…·ï¼ŒPythonçš„å®ç°ä¹Ÿç¬¦åˆè¿™ä¸ªè®¾è®¡å“²å­¦ï¼Œåœ¨Pythonä¸­assertè¯­å¥çš„æ‰§è¡Œæ˜¯ä¾èµ–äº<code>__debug__</code>è¿™ä¸ªå†…ç½®å˜é‡çš„ï¼Œå…¶é»˜è®¤å€¼ä¸º<code>True</code>ã€‚å½“<code>__debug__</code>ä¸º<code>True</code>æ—¶ï¼Œassertè¯­å¥æ‰ä¼šè¢«æ‰§è¡Œã€‚</p><p>å¯¹äºä¸€èˆ¬çš„å£°æ˜ï¼Œassert expressionç­‰ä»·äº<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __debug__:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> expression: <span class="keyword">raise</span> AssertionError</span><br></pre></td></tr></table></figure></p><p>assertå¯ä»¥åŒæ—¶å£°æ˜ä¸¤ä¸ªä¸ªexpressionï¼Œä¾‹å¦‚<strong>assert expression1, expression2</strong>ç­‰ä»·äº<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __debug__:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> expression1: <span class="keyword">raise</span> AssertionError(expression2)</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæ‰§è¡Œè„šæœ¬æ–‡ä»¶æ—¶åŠ ä¸Š<code>-O</code>å‚æ•°ï¼Œ <code>__debug__</code>åˆ™ä¸º<code>False</code></p><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè„šæœ¬testAssert.pyï¼Œå†…å®¹ä¸ºï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(__debug__)</span><br><span class="line"><span class="keyword">assert</span> <span class="number">1</span> &gt; <span class="number">2</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><p>å½“ä½¿ç”¨<code>python assert.py</code>è¿è¡Œæ—¶ï¼Œ<code>__debug__</code>ä¼šè¾“å‡ºTrueï¼Œassert 1 &gt; 2è¯­å¥ä¼šæŠ›å‡ºAssertionErrorå¼‚å¸¸ã€‚</p><p>å½“ä½¿ç”¨<code>python -O assert.py</code>è¿è¡Œæ—¶ï¼Œ<code>__debug__</code>ä¼šè¾“å‡ºFalseï¼Œassert 1 &gt; 2è¯­å¥ç”±äºæ²¡æœ‰æ‰§è¡Œä¸ä¼šæŠ¥ä»»ä½•å¼‚å¸¸ã€‚</p><h3 id="æ–­è¨€å’Œå¼‚å¸¸çš„ä½¿ç”¨åœºæ™¯"><a href="#æ–­è¨€å’Œå¼‚å¸¸çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="æ–­è¨€å’Œå¼‚å¸¸çš„ä½¿ç”¨åœºæ™¯"></a>æ–­è¨€å’Œå¼‚å¸¸çš„ä½¿ç”¨åœºæ™¯</h3><p>å…ˆè¯´ç»“è®ºï¼š</p><blockquote><p>æ£€æŸ¥<code>å…ˆéªŒæ¡ä»¶</code>ä½¿ç”¨æ–­è¨€ï¼Œæ£€æŸ¥<code>åéªŒæ¡ä»¶</code>ä½¿ç”¨å¼‚å¸¸</p></blockquote><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¯»å–æœ¬åœ°æ–‡ä»¶çš„åœºæ™¯ã€‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªread_fileæ–¹æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_file</span><span class="params">(path)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> is_instance(file_path, str)</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>read_fileå‡½æ•°è¦æ±‚åœ¨å¼€å§‹æ‰§è¡Œçš„æ—¶å€™æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼šfile_pathå¿…é¡»æ˜¯strç±»å‹ï¼Œè¿™ä¸ªæ¡ä»¶å°±æ˜¯å…ˆéªŒæ¡ä»¶ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œå°±ä¸èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¦‚æœçœŸçš„å‡ºç°äº†ä¸æ»¡è¶³æ¡ä»¶çš„æƒ…å†µï¼Œè¯æ˜ä»£ç ä¸­å‡ºç°äº†bugï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨assertè¯­å¥æ¥å¯¹file_pathçš„ç±»å‹è¿›è¡Œæ¨æ–­ï¼Œæé†’ç¨‹åºå‘˜ä¿®æ”¹ä»£ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ifâ€¦raiseâ€¦è¯­å¥æ¥å®ç°assertï¼Œä½†æ˜¯è¦ç¹çå¾ˆå¤šã€‚åœ¨å¾ˆå¤šä¼˜ç§€çš„Pythoné¡¹ç›®ä¸­éƒ½ä¼šçœ‹åˆ°ä½¿ç”¨assertè¿›è¡Œå…ˆéªŒåˆ¤æ–­çš„æƒ…å†µï¼Œå¹³æ—¶å¯ä»¥å¤šå¤šç•™æ„ã€‚</p><p>read_fileå‡½æ•°åœ¨è¢«è°ƒç”¨æ‰§è¡Œåï¼Œä¾ç„¶éœ€è¦æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œæ¯”å¦‚file_pathæ‰€æŒ‡å®šçš„æ–‡ä»¶éœ€è¦æ˜¯å­˜åœ¨çš„ï¼Œå¹¶ä¸”å½“å‰ç”¨æˆ·æœ‰æƒé™è¯»å–è¯¥æ–‡ä»¶ï¼Œè¿™äº›æ¡ä»¶ç§°ä¸ºåéªŒæ¡ä»¶ï¼Œå¯¹äºåéªŒæ¡ä»¶çš„æ£€æŸ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¼‚å¸¸æ¥å¤„ç†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_file</span><span class="params">(file_path)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> isinstance(file_path, str)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> check_exist(file_path):</span><br><span class="line">        <span class="keyword">raise</span> FileNotFoundError()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> has_privilege(file_path):</span><br><span class="line">        <span class="keyword">raise</span> PermissionError()</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶ä¸å­˜åœ¨å’Œæ²¡æœ‰æƒé™ï¼Œè¿™ä¸¤ç§æƒ…å†µå¹¶ä¸å±äºä»£ç bugï¼Œæ˜¯ä»£ç é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œä¸Šå±‚ä»£ç æ•è·å¼‚å¸¸åå¯èƒ½ä¼šæ‰§è¡Œå…¶ä»–é€»è¾‘ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½æ¥å—è¿™éƒ¨åˆ†ä»£ç åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¢«å¿½ç•¥ã€‚å¹¶ä¸”ï¼Œç›¸æ¯”äºassertè¯­å¥åªèƒ½æŠ›å‡ºAssertionErrorï¼Œä½¿ç”¨å¼‚å¸¸å¯ä»¥æŠ›å‡ºæ›´è¯¦ç»†çš„é”™è¯¯ï¼Œæ–¹ä¾¿ä¸Šå±‚ä»£ç é’ˆå¯¹ä¸åŒé”™è¯¯æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚</p><hr><p><a href="https://juejin.im/post/5af02413f265da0b776f9e15" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä»€ä¹ˆæ˜¯assertæ–­è¨€&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯assertæ–­è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯assertæ–­è¨€&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯assertæ–­è¨€&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Assert statements are a convenient way to insert debugging assertions into a program&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ–­è¨€å£°æ˜æ˜¯ç”¨äºç¨‹åºè°ƒè¯•çš„ä¸€ä¸ªä¾¿æ·æ–¹å¼ã€‚æ–­è¨€å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªdebugå·¥å…·ï¼ŒPythonçš„å®ç°ä¹Ÿç¬¦åˆè¿™ä¸ªè®¾è®¡å“²å­¦ï¼Œåœ¨Pythonä¸­assertè¯­å¥çš„æ‰§è¡Œæ˜¯ä¾èµ–äº&lt;code&gt;__debug__&lt;/code&gt;è¿™ä¸ªå†…ç½®å˜é‡çš„ï¼Œå…¶é»˜è®¤å€¼ä¸º&lt;code&gt;True&lt;/code&gt;ã€‚å½“&lt;code&gt;__debug__&lt;/code&gt;ä¸º&lt;code&gt;True&lt;/code&gt;æ—¶ï¼Œassertè¯­å¥æ‰ä¼šè¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸€èˆ¬çš„å£°æ˜ï¼Œassert expressionç­‰ä»·äº&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; __debug__:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; expression: &lt;span class=&quot;keyword&quot;&gt;raise&lt;/span&gt; AssertionError&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;assertå¯ä»¥åŒæ—¶å£°æ˜ä¸¤ä¸ªä¸ªexpressionï¼Œä¾‹å¦‚&lt;strong&gt;assert expression1, expression2&lt;/strong&gt;ç­‰ä»·äº&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; __debug__:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;not&lt;/span&gt; expression1: &lt;span class=&quot;keyword&quot;&gt;raise&lt;/span&gt; AssertionError(expression2)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‰§è¡Œè„šæœ¬æ–‡ä»¶æ—¶åŠ ä¸Š&lt;code&gt;-O&lt;/code&gt;å‚æ•°ï¼Œ &lt;code&gt;__debug__&lt;/code&gt;åˆ™ä¸º&lt;code&gt;False&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè„šæœ¬testAssert.pyï¼Œå†…å®¹ä¸ºï¼š&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print(__debug__)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
  </entry>
  
  <entry>
    <title>ç¥ç»ç½‘ç»œä¸­ä¸ºä»€ä¹ˆä¸èƒ½å°†æƒé‡åˆå§‹å€¼è®¾ç½®ä¸ºä¸€æ ·çš„å€¼</title>
    <link href="http://kunxiang.wang/2019/11/04/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%AD%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E5%B0%86%E6%9D%83%E9%87%8D%E5%88%9D%E5%A7%8B%E5%80%BC%E8%AE%BE%E7%BD%AE%E4%B8%BA%E4%B8%80%E6%A0%B7%E7%9A%84%E5%80%BC/"/>
    <id>http://kunxiang.wang/2019/11/04/ç¥ç»ç½‘ç»œä¸­ä¸ºä»€ä¹ˆä¸èƒ½å°†æƒé‡åˆå§‹å€¼è®¾ç½®ä¸ºä¸€æ ·çš„å€¼/</id>
    <published>2019-11-04T03:00:31.000Z</published>
    <updated>2019-11-15T08:27:21.259Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆè¯´ç»“è®ºï¼Œå¦‚æœæƒé‡åˆå§‹å€¼è®¾ä¸º0çš„è¯ï¼Œå°†æ— æ³•æ­£ç¡®è¿›è¡Œå­¦ä¹ ã€‚</p><p>è¿™æ˜¯å› ä¸ºåœ¨è¯¯å·®åå‘ä¼ æ’­æ³•ä¸­ï¼Œæ‰€æœ‰çš„æƒé‡å€¼éƒ½ä¼šè¿›è¡Œç›¸åŒçš„æ›´æ–°ã€‚æ¯”å¦‚ï¼Œåœ¨2å±‚ç¥ç»ç½‘ç»œä¸­ï¼Œå‡è®¾ç¬¬1å±‚å’Œç¬¬2å±‚çš„æƒé‡ä¸º0ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ­£å‘ä¼ æ’­æ—¶ï¼Œå› ä¸ºè¾“å…¥å±‚çš„æƒé‡ä¸º0ï¼Œæ‰€ä»¥ç¬¬2å±‚çš„ç¥ç»å…ƒå…¨éƒ¨ä¼šè¢«ä¼ é€’ç›¸åŒçš„å€¼ã€‚ç¬¬2å±‚çš„ç¥ç»å…ƒä¸­å…¨éƒ¨è¾“å…¥ç›¸åŒçš„å€¼ï¼Œè¿™æ„å‘³ç€åå‘ä¼ æ’­æ—¶ç¬¬2å±‚çš„æƒé‡å…¨éƒ¨éƒ½ä¼šè¿›è¡Œç›¸åŒçš„æ›´æ–°ã€‚å› æ­¤ï¼Œæƒé‡è¢«æ›´æ–°ä¸ºç›¸åŒçš„å€¼ï¼Œå¹¶æ‹¥æœ‰äº†å¯¹ç§°çš„å€¼(é‡å¤çš„å€¼)ã€‚è¿™ä½¿å¾—ç¥ç»ç½‘ç»œæ‹¥æœ‰è®¸å¤šä¸åŒçš„æƒé‡çš„æ„ä¹‰ä¸§å¤±äº†ã€‚ä¸ºäº†é˜²æ­¢â€œæƒé‡å‡ä¸€åŒ–â€ (ä¸¥æ ¼åœ°è®²ï¼Œæ˜¯ä¸ºäº†ç“¦è§£æƒé‡çš„å¯¹ç§°ç»“æ„)ï¼Œå¿…é¡»éšæœºç”Ÿæˆåˆå§‹å€¼ã€‚</p><p>å®é™…ä¸Šï¼Œè€ƒè™‘ä¸€ä¸ªå…¨è¿æ¥çš„ç¥ç»ç½‘ç»œï¼ŒåŒä¸€å±‚ä¸­çš„ä»»æ„ç¥ç»å…ƒæ˜¯åŒæ„çš„ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥ä»–ä»¬ä¼šæœ‰åŒæ ·çš„è¾“å‡ºï¼Œæ­¤æ—¶å¦‚æœå°†å‚æ•°å…¨éƒ¨åˆå§‹åŒ–ä¸ºç›¸åŒçš„å€¼ï¼Œé‚£ä¹ˆæ— è®ºå‰å‘ä¼ æ’­è¿˜æ˜¯åå‘ä¼ æ’­ï¼Œå‚æ•°çš„å–å€¼è¿˜æ˜¯å®Œå…¨ç›¸åŒï¼Œå­¦ä¹ å°†æ— æ³•æ‰“ç ´è¿™ç§å¯¹ç§°æ€§ï¼Œæœ€ç»ˆåŒä¸€ç½‘ç»œå±‚ä¸­çš„å„ä¸ªå‚æ•°ä»ç„¶æ˜¯ç›¸åŒçš„ã€‚</p><p>ç»¼ä¸Šï¼Œå¿…é¡»éšæœºçš„åˆå§‹åŒ–ç¥ç»ç½‘ç»œå‚æ•°çš„å€¼ï¼Œä»¥æ‰“ç ´è¿™ç§å¯¹ç§°æ€§ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å…ˆè¯´ç»“è®ºï¼Œå¦‚æœæƒé‡åˆå§‹å€¼è®¾ä¸º0çš„è¯ï¼Œå°†æ— æ³•æ­£ç¡®è¿›è¡Œå­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºåœ¨è¯¯å·®åå‘ä¼ æ’­æ³•ä¸­ï¼Œæ‰€æœ‰çš„æƒé‡å€¼éƒ½ä¼šè¿›è¡Œç›¸åŒçš„æ›´æ–°ã€‚æ¯”å¦‚ï¼Œåœ¨2å±‚ç¥ç»ç½‘ç»œä¸­ï¼Œå‡è®¾ç¬¬1å±‚å’Œç¬¬2å±‚çš„æƒé‡ä¸º0ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ­£å‘ä¼ æ’­æ—¶ï¼Œå› ä¸ºè¾“å…¥å±‚çš„æƒé‡ä¸º0ï¼Œæ‰€ä»¥ç¬¬2å±‚çš„ç¥ç»å…ƒå…¨éƒ¨ä¼šè¢«ä¼ é€’ç›¸åŒçš„å€¼ã€‚ç¬¬2
      
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://kunxiang.wang/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://kunxiang.wang/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="ç¥ç»ç½‘ç»œ" scheme="http://kunxiang.wang/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>Gitåˆ†æ”¯ç®¡ç†ç­–ç•¥åŠç®€å•æ“ä½œ</title>
    <link href="http://kunxiang.wang/2019/10/10/Git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5%E5%8F%8A%E7%AE%80%E5%8D%95%E6%93%8D%E4%BD%9C/"/>
    <id>http://kunxiang.wang/2019/10/10/Gitåˆ†æ”¯ç®¡ç†ç­–ç•¥åŠç®€å•æ“ä½œ/</id>
    <published>2019-10-10T05:59:05.000Z</published>
    <updated>2019-10-10T09:53:47.695Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ å¤©æ•´ç†äº†ä¸€ä¸‹ä¹‹å‰é¡¹ç›®çš„å¼€å‘ä»£ç ï¼Œå½“æ—¶ä½¿ç”¨äº†Gitæ¥è¿›è¡Œä»£ç ç®¡ç†ã€‚è™½ç„¶æœ¬äººç†Ÿæ‚‰å¸¸ç”¨çš„Gitæ“ä½œï¼Œä½†æ˜¯å¯¹åˆ†æ”¯çš„ç®¡ç†ç»éªŒéå¸¸æ¬ ç¼ºã€‚æ‹¿è¿™ä¸ªé¡¹ç›®æ¥è¯´ï¼Œåœ¨é¡¹ç›®ä¸­æœ‰ä¸ä¸‹20ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯é—´çš„ç»§æ‰¿å…³ç³»ç›¸å½“ä¹‹æ··ä¹±ï¼Œéå¸¸ä¸åˆ©äºä»£ç çš„å®‰å…¨ç®¡ç†ã€‚å› æ­¤ï¼Œé€šè¿‡åœ¨ç½‘ç»œä¸Šçš„å­¦ä¹ ï¼Œæ€»ç»“äº†ä¸€ä¸‹å…³äºGitåˆ†æ”¯ç®¡ç†çš„ç­–ç•¥æ–¹æ³•ï¼Œä¾›åç»­å›é¡¾å­¦ä¹ ã€‚</p><p>å½“ç„¶å¿…é¡»æ‰¿è®¤ï¼Œä»£ç åˆ†æ”¯ç®¡ç†ç­–ç•¥æœ‰å¾ˆå¤šç§ï¼Œä¸å±€é™äºä»¥ä¸‹ä»‹ç»ã€‚ä½†æ˜¯ä¸‹é¢ä»‹ç»çš„è¿™ä¸ªåˆ†æ”¯ç®¡ç†ç­–ç•¥éå¸¸å…·æœ‰å·¥ç¨‹å€Ÿé‰´æ„ä¹‰ï¼Œå‡ ä¹é€‚ç”¨äºæ‰€æœ‰å¼€å‘åœºæ™¯ã€‚</p><table><thead><tr><th style="text-align:center">åˆ†æ”¯</th><th style="text-align:center">å‘½å</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">ä¸»åˆ†æ”¯</td><td style="text-align:center">master</td><td style="text-align:center">ä¸»åˆ†æ”¯ï¼Œæ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒ</td></tr><tr><td style="text-align:center">å¼€å‘åˆ†æ”¯</td><td style="text-align:center">develop</td><td style="text-align:center">å¼€å‘åˆ†æ”¯ï¼Œæ°¸è¿œæ˜¯åŠŸèƒ½æœ€æ–°æœ€å…¨çš„åˆ†æ”¯</td></tr><tr><td style="text-align:center">åŠŸèƒ½åˆ†æ”¯</td><td style="text-align:center">feature-*</td><td style="text-align:center">æ–°åŠŸèƒ½åˆ†æ”¯ï¼ŒæŸä¸ªåŠŸèƒ½ç‚¹æ­£åœ¨å¼€å‘é˜¶æ®µ</td></tr><tr><td style="text-align:center">å‘å¸ƒç‰ˆæœ¬</td><td style="text-align:center">release-*</td><td style="text-align:center">å‘å¸ƒå®šæœŸè¦ä¸Šçº¿çš„åŠŸèƒ½</td></tr><tr><td style="text-align:center">ä¿®å¤åˆ†æ”¯</td><td style="text-align:center">hotfix-*</td><td style="text-align:center">ä¿®å¤çº¿ä¸Šä»£ç çš„ bug</td></tr></tbody></table><a id="more"></a><h3 id="1-ä¸»åˆ†æ”¯master"><a href="#1-ä¸»åˆ†æ”¯master" class="headerlink" title="1. ä¸»åˆ†æ”¯master"></a>1. ä¸»åˆ†æ”¯master</h3><p>é¦–å…ˆï¼Œä»£ç åº“åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªä¸»åˆ†æ”¯ã€‚æ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒã€‚Gitä¸»åˆ†æ”¯çš„åå­—ï¼Œé»˜è®¤å«åšmasterã€‚å®ƒæ˜¯è‡ªåŠ¨å»ºç«‹çš„ï¼Œç‰ˆæœ¬åº“åˆå§‹åŒ–ä»¥åï¼Œé»˜è®¤å°±æ˜¯åœ¨ä¸»åˆ†æ”¯åœ¨è¿›è¡Œå¼€å‘ã€‚å›¢é˜Ÿæˆå‘˜ä»ä¸»åˆ†æ”¯(master)è·å¾—çš„éƒ½æ˜¯å¤„äºå¯å‘å¸ƒçŠ¶æ€çš„ä»£ç ã€‚</p><h3 id="2-å¼€å‘åˆ†æ”¯develop"><a href="#2-å¼€å‘åˆ†æ”¯develop" class="headerlink" title="2. å¼€å‘åˆ†æ”¯develop"></a>2. å¼€å‘åˆ†æ”¯develop</h3><p>æ—¥å¸¸å¼€å‘åº”è¯¥åœ¨å¦ä¸€æ¡åˆ†æ”¯ä¸Šå®Œæˆã€‚æˆ‘ä»¬æŠŠå¼€å‘ç”¨çš„åˆ†æ”¯ï¼Œå«åšdevelopåˆ†æ”¯ã€‚å¼€å‘åˆ†æ”¯(develop)åº”è¯¥æ€»èƒ½å¤Ÿè·å¾—æœ€æ–°å¼€å‘è¿›å±•çš„ä»£ç ã€‚å¦‚æœæƒ³æ­£å¼å¯¹å¤–å‘å¸ƒï¼Œå°±åœ¨masteråˆ†æ”¯ä¸Šï¼Œå¯¹developåˆ†æ”¯è¿›è¡Œmergeã€‚ä¸‹é¢ä»‹ç»å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨masteråˆ†æ”¯ä¸Šåˆ›å»ºdevelopåˆ†æ”¯</span></span><br><span class="line">git checkout -b develop master</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°masteråˆ†æ”¯</span></span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹developåˆ†æ”¯åˆå¹¶åˆ°å½“å‰masteråˆ†æ”¯</span></span><br><span class="line">git merge --no-ff develop</span><br></pre></td></tr></table></figure><h3 id="3-ä¸´æ—¶åˆ†æ”¯"><a href="#3-ä¸´æ—¶åˆ†æ”¯" class="headerlink" title="3. ä¸´æ—¶åˆ†æ”¯"></a>3. ä¸´æ—¶åˆ†æ”¯</h3><p>é™¤äº†å¸¸è®¾åˆ†æ”¯ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸´æ—¶æ€§åˆ†æ”¯ï¼Œç”¨äºåº”å¯¹ä¸€äº›ç‰¹å®šç›®çš„çš„ç‰ˆæœ¬å¼€å‘ã€‚ä¸´æ—¶æ€§åˆ†æ”¯ä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ul><li>åŠŸèƒ½ï¼ˆfeatureï¼‰åˆ†æ”¯</li><li>é¢„å‘å¸ƒï¼ˆreleaseï¼‰åˆ†æ”¯</li><li>ä¿®è¡¥bugï¼ˆbugfixï¼‰åˆ†æ”¯</li></ul><p>è¿™ä¸‰ç§åˆ†æ”¯éƒ½å±äºä¸´æ—¶æ€§éœ€è¦ï¼Œä½¿ç”¨å®Œä»¥åï¼Œæœ€å¥½åˆ é™¤ï¼Œä½¿å¾—ä»£ç åº“çš„å¸¸è®¾åˆ†æ”¯å§‹ç»ˆåªæœ‰masterå’Œdevelopã€‚</p><h4 id="åŠŸèƒ½åˆ†æ”¯"><a href="#åŠŸèƒ½åˆ†æ”¯" class="headerlink" title="åŠŸèƒ½åˆ†æ”¯"></a>åŠŸèƒ½åˆ†æ”¯</h4><p>featureåˆ†æ”¯æ˜¯ä¸ºäº†å¼€å‘æŸç§ç‰¹å®šåŠŸèƒ½ï¼Œä»developåˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚å¼€å‘å®Œæˆåï¼Œè¦å†å¹¶å…¥developã€‚åŠŸèƒ½åˆ†æ”¯çš„åå­—ï¼Œå¯ä»¥é‡‡ç”¨feature-xxxçš„å½¢å¼å‘½åã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»developåˆ›å»ºä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯</span></span><br><span class="line">git checkout -b feature-x develop</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å‘å®Œæˆåï¼Œå°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ï¼š</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff feature-x</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤featureåˆ†æ”¯</span></span><br><span class="line">git branch -d feature-x</span><br></pre></td></tr></table></figure></p><h4 id="é¢„å‘å¸ƒåˆ†æ”¯"><a href="#é¢„å‘å¸ƒåˆ†æ”¯" class="headerlink" title="é¢„å‘å¸ƒåˆ†æ”¯"></a>é¢„å‘å¸ƒåˆ†æ”¯</h4><p>releaseåˆ†æ”¯æ˜¯æŒ‡å‘å¸ƒæ­£å¼ç‰ˆæœ¬ä¹‹å‰ï¼ˆå³åˆå¹¶åˆ°masteråˆ†æ”¯ä¹‹å‰ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªé¢„å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•è€Œåˆ›å»ºçš„åˆ†æ”¯ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªé¢„å‘å¸ƒåˆ†æ”¯</span></span><br><span class="line">git checkout -b release-x develop</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤æ²¡æœ‰é—®é¢˜åï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge --no-ff release-x</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹åˆå¹¶ç”Ÿæˆçš„æ–°èŠ‚ç‚¹ï¼Œåšä¸€ä¸ªæ ‡ç­¾</span></span><br><span class="line">git tag -a 1.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†åˆå¹¶åˆ°developåˆ†æ”¯</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff release-x</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€åï¼Œåˆ é™¤é¢„å‘å¸ƒåˆ†æ”¯</span></span><br><span class="line">git branch -d release-x</span><br></pre></td></tr></table></figure></p><h4 id="bugä¿®è¡¥åˆ†æ”¯"><a href="#bugä¿®è¡¥åˆ†æ”¯" class="headerlink" title="bugä¿®è¡¥åˆ†æ”¯"></a>bugä¿®è¡¥åˆ†æ”¯</h4><p>è½¯ä»¶æ­£å¼å‘å¸ƒä»¥åï¼Œéš¾å…ä¼šå‡ºç°bugã€‚è¿™æ—¶å°±éœ€è¦åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œè¿›è¡Œbugä¿®è¡¥ã€‚</p><p>ä¿®è¡¥bugåˆ†æ”¯æ˜¯ä»Masteråˆ†æ”¯ä¸Šé¢åˆ†å‡ºæ¥çš„ã€‚ä¿®è¡¥ç»“æŸä»¥åï¼Œå†åˆå¹¶è¿›masterå’Œdevelopåˆ†æ”¯ã€‚å®ƒçš„å‘½åï¼Œå¯ä»¥é‡‡ç”¨hotfix-xçš„å½¢å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªä¿®è¡¥bugåˆ†æ”¯</span></span><br><span class="line">git checkout -b hotfix-x master</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®è¡¥ç»“æŸåï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge --no-ff hotfix-x</span><br><span class="line">git tag -a 0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†åˆå¹¶åˆ°developåˆ†æ”¯</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff hotfix-x</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤"ä¿®è¡¥bugåˆ†æ”¯"</span></span><br><span class="line">git branch -d hotfix-x</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191010172919306.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸Šé¢è®¸å¤šæŒ‡ä»¤ä½¿ç”¨çš„â€“no-ffçš„æ„æ€æ˜¯no-fast-farwardçš„ç¼©å†™ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥ä¿æŒæ›´å¤šçš„ç‰ˆæœ¬æ¼”è¿›çš„ç»†èŠ‚ã€‚å¦‚æœä¸ä½¿ç”¨è¯¥å‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨äº†fast-farwordè¿›è¡Œmergeã€‚ä¸¤è€…çš„åŒºåˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/2019101017424529.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æœ€ååˆ†äº«ä¸€ä¸‹æ•´ä½“çš„åˆ†æ”¯ç®¡ç†ç­–ç•¥å›¾ç¤º:<br><img src="https://img-blog.csdnimg.cn/20191010174810996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>å‚è€ƒï¼š</p><blockquote><p><a href="https://nvie.com/posts/a-successful-git-&gt;branching-model/" target="_blank" rel="noopener">A successful Git branching model</a><br>â€”from <a href="https://nvie.com/about/" target="_blank" rel="noopener">Vincent Driessen</a></p></blockquote><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰å‡ å¤©æ•´ç†äº†ä¸€ä¸‹ä¹‹å‰é¡¹ç›®çš„å¼€å‘ä»£ç ï¼Œå½“æ—¶ä½¿ç”¨äº†Gitæ¥è¿›è¡Œä»£ç ç®¡ç†ã€‚è™½ç„¶æœ¬äººç†Ÿæ‚‰å¸¸ç”¨çš„Gitæ“ä½œï¼Œä½†æ˜¯å¯¹åˆ†æ”¯çš„ç®¡ç†ç»éªŒéå¸¸æ¬ ç¼ºã€‚æ‹¿è¿™ä¸ªé¡¹ç›®æ¥è¯´ï¼Œåœ¨é¡¹ç›®ä¸­æœ‰ä¸ä¸‹20ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯é—´çš„ç»§æ‰¿å…³ç³»ç›¸å½“ä¹‹æ··ä¹±ï¼Œéå¸¸ä¸åˆ©äºä»£ç çš„å®‰å…¨ç®¡ç†ã€‚å› æ­¤ï¼Œé€šè¿‡åœ¨ç½‘ç»œä¸Šçš„å­¦ä¹ ï¼Œæ€»ç»“äº†ä¸€ä¸‹å…³äºGitåˆ†æ”¯ç®¡ç†çš„ç­–ç•¥æ–¹æ³•ï¼Œä¾›åç»­å›é¡¾å­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶å¿…é¡»æ‰¿è®¤ï¼Œä»£ç åˆ†æ”¯ç®¡ç†ç­–ç•¥æœ‰å¾ˆå¤šç§ï¼Œä¸å±€é™äºä»¥ä¸‹ä»‹ç»ã€‚ä½†æ˜¯ä¸‹é¢ä»‹ç»çš„è¿™ä¸ªåˆ†æ”¯ç®¡ç†ç­–ç•¥éå¸¸å…·æœ‰å·¥ç¨‹å€Ÿé‰´æ„ä¹‰ï¼Œå‡ ä¹é€‚ç”¨äºæ‰€æœ‰å¼€å‘åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;åˆ†æ”¯&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;å‘½å&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¸»åˆ†æ”¯&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;master&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¸»åˆ†æ”¯ï¼Œæ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¼€å‘åˆ†æ”¯&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;develop&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¼€å‘åˆ†æ”¯ï¼Œæ°¸è¿œæ˜¯åŠŸèƒ½æœ€æ–°æœ€å…¨çš„åˆ†æ”¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;åŠŸèƒ½åˆ†æ”¯&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;feature-*&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;æ–°åŠŸèƒ½åˆ†æ”¯ï¼ŒæŸä¸ªåŠŸèƒ½ç‚¹æ­£åœ¨å¼€å‘é˜¶æ®µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å‘å¸ƒç‰ˆæœ¬&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;release-*&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å‘å¸ƒå®šæœŸè¦ä¸Šçº¿çš„åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¿®å¤åˆ†æ”¯&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;hotfix-*&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¿®å¤çº¿ä¸Šä»£ç çš„ bug&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
    
    </summary>
    
      <category term="Git" scheme="http://kunxiang.wang/categories/Git/"/>
    
    
      <category term="Git" scheme="http://kunxiang.wang/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>æµ…æPythonä¸­çš„åˆ—è¡¨å’Œå…ƒç»„</title>
    <link href="http://kunxiang.wang/2019/10/07/%E6%B5%85%E6%9E%90Python%E4%B8%AD%E7%9A%84%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84/"/>
    <id>http://kunxiang.wang/2019/10/07/æµ…æPythonä¸­çš„åˆ—è¡¨å’Œå…ƒç»„/</id>
    <published>2019-10-07T05:25:10.000Z</published>
    <updated>2019-10-07T05:26:09.102Z</updated>
    
    <content type="html"><![CDATA[<h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><ol><li>åˆ—è¡¨æ˜¯<code>åŠ¨æ€æ•°ç»„</code>ï¼Œå®ƒä»¬å¯å˜ä¸”å¯ä»¥é‡è®¾é•¿åº¦(æ”¹å˜å…¶å†…éƒ¨å…ƒç´ çš„ä¸ªæ•°)ã€‚</li><li>å…ƒç»„æ˜¯<code>é™æ€æ•°ç»„</code>ï¼Œå®ƒä»¬ä¸å¯å˜ï¼Œä¸”å…¶å†…éƒ¨æ•°æ®ä¸€æ—¦åˆ›å»ºä¾¿æ— æ³•æ”¹å˜ã€‚</li><li>å…ƒç»„ç¼“å­˜äºPythonè¿è¡Œæ—¶ç¯å¢ƒï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨å…ƒç»„æ—¶æ— é¡»è®¿é—®å†…æ ¸å» åˆ†é…å†…å­˜ã€‚</li></ol><p>è¿™äº›åŒºåˆ«æ­ç¤ºäº†ä¸¤è€…åœ¨è®¾è®¡å“²å­¦ä¸Šçš„ä¸åŒ:å…ƒç»„ç”¨äºæè¿°ä¸€ä¸ªä¸ä¼šæ”¹å˜çš„äº‹ç‰©çš„å¤šä¸ªå±æ€§ï¼Œè€Œåˆ—è¡¨å¯è¢«ç”¨äºä¿å­˜å¤šä¸ªäº’ç›¸ç‹¬ç«‹å¯¹è±¡çš„æ•°æ®é›†åˆã€‚</p><a id="more"></a><h4 id="åŠ¨æ€æ•°ç»„â€“åˆ—è¡¨"><a href="#åŠ¨æ€æ•°ç»„â€“åˆ—è¡¨" class="headerlink" title="åŠ¨æ€æ•°ç»„â€“åˆ—è¡¨"></a>åŠ¨æ€æ•°ç»„â€“åˆ—è¡¨</h4><p>åˆ—è¡¨å¯ä»¥æ”¹å˜å¤§å°åŠå†…å®¹ä¸åŒï¼Œåˆ—è¡¨çš„å¯å˜æ€§çš„ä»£ä»·åœ¨äºå­˜å‚¨å®ƒä»¬éœ€è¦é¢å¤–çš„å†…å­˜ä»¥åŠä½¿ç”¨å®ƒä»¬éœ€è¦é¢å¤–çš„è®¡ç®—ã€‚æˆ‘ä»¬åœ¨<a href="https://mp.weixin.qq.com/s?__biz=MzU5OTUwMTA4NA==&amp;mid=2247483804&amp;idx=1&amp;sn=4cef9561e71e5c6a621529be757a5b2f&amp;chksm=feb2b1efc9c538f9ddcb91175fedd6468cfbc5e2b613b3d8a48077a8ea0194b41a7ff8e20e9d&amp;token=475883438&amp;lang=zh_CN#rd" target="_blank" rel="noopener">æµ…æPythonä¸­åˆ—è¡¨æ“ä½œä¹‹*å’Œ*=</a>ä¸­ä¸€èµ·ç ”ç©¶äº†cpythonçš„listå¯¹è±¡çš„æºç ï¼Œçœ‹åˆ°äº†listå¯¹è±¡çš„åŠ¨æ€åˆ†é…æ•°ç»„çš„å¤§ä½“è¿‡ç¨‹(è°ƒç”¨resizeå‡½æ•°)ï¼Œè€Œä¸”åœ¨åŠ¨æ€è°ƒæ•´æ•°ç»„å¤§å°æ—¶ä½¿ç”¨å¦‚ä¸‹çš„åˆ†é…å…¬å¼:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_allocated = (<span class="keyword">size_t</span>)newsize + (newsize &gt;&gt; <span class="number">3</span>) + (newsize &lt; <span class="number">9</span> ? <span class="number">3</span> : <span class="number">6</span>);</span><br></pre></td></tr></table></figure><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªåˆ—è¡¨å¤šæ¬¡æ·»åŠ å…ƒç´ æ—¶åˆ†é…ç©ºé—´çš„å˜åŒ–ç¤ºæ„å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20191007131224310.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="é™æ€æ•°ç»„â€“å…ƒç»„"><a href="#é™æ€æ•°ç»„â€“å…ƒç»„" class="headerlink" title="é™æ€æ•°ç»„â€“å…ƒç»„"></a>é™æ€æ•°ç»„â€“å…ƒç»„</h4><p>å…ƒç»„çš„ä¸å¯æ”¹å˜æ€§ä½¿å…¶æˆä¸ºäº†ä¸€ä¸ªéå¸¸è½»é‡çº§çš„æ•°æ®ç»“æ„ã€‚è¿™æ„å‘³ç€å­˜å‚¨å…ƒç»„ä¸éœ€è¦å¾ˆå¤šçš„å†…å­˜å¼€é”€ï¼Œè€Œä¸”å¯¹å…ƒç»„çš„æ“ä½œä¹Ÿéå¸¸ç›´è§‚ã€‚ä¸€æ—¦å…ƒç»„è¢«åˆ›å»ºï¼Œå®ƒçš„å†…å®¹æ— æ³•è¢«ä¿®æ”¹æˆ–å®ƒçš„å¤§å°ä¹Ÿæ— æ³•è¢«æ”¹å˜ã€‚è™½ç„¶å®ƒä»¬ä¸æ”¯æŒæ”¹å˜å¤§å°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†ä¸¤ä¸ªå…ƒç»„åˆå¹¶æˆä¸€ä¸ªæ–°å…ƒç»„ã€‚è¿™ä¸€æ“ä½œç±»ä¼¼åˆ—è¡¨çš„resizeæ“ä½œï¼Œä½†æˆ‘ä»¬ä¸éœ€è¦ä¸ºæ–°ç”Ÿæˆçš„å…ƒç»„åˆ†é…ä»»ä½•<code>é¢å¤–</code>çš„ç©ºé—´ã€‚ä»»æ„ä¸¤ä¸ªå…ƒç»„ç›¸åŠ æˆ–è€…å…ƒç»„ä¹˜ä»¥ä¸€ä¸ªæ•´æ•°è¿›è¡Œrepeatå§‹ç»ˆè¿”å›ä¸€ä¸ªæ–°åˆ†é…çš„å…ƒç»„ã€‚å…¶ä¸­ä¸¤ä¸ªå…ƒç»„ç›¸åŠ è°ƒç”¨cpythonä¸­çš„tupleconcatæ–¹æ³•ï¼Œè€Œä¹˜æ³•æ“ä½œè°ƒç”¨çš„æ˜¯tuplerepeatæ–¹æ³•ã€‚ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•çš„å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> PyObject *</span><br><span class="line">tupleconcat(PyTupleObject *a, PyObject *bb)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    size = Py_SIZE(a) + Py_SIZE(b);</span><br><span class="line">    np = tuple_alloc(size);</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> (PyObject *)np;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> PyObject *</span><br><span class="line">tuplerepeat(PyTupleObject *a, Py_ssize_t n)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    size = Py_SIZE(a) * n;</span><br><span class="line">    np = tuple_alloc(size);</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (PyObject *) np;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ƒç»„çš„é™æ€ç‰¹æ€§çš„å¦ä¸€ä¸ªå¥½å¤„ä½“ç°åœ¨ä¸€äº›ä¼šåœ¨Pythonåå°å‘ç”Ÿçš„äº‹:èµ„æºç¼“å­˜ã€‚Pythonæ˜¯ä¸€é—¨åƒåœ¾æ”¶é›†è¯­è¨€ï¼Œè¿™æ„å‘³ç€å½“ä¸€ä¸ªå˜é‡ä¸å†è¢«ä½¿ç”¨æ—¶ï¼ŒPythonä¼šå°†è¯¥å˜é‡ä½¿ç”¨çš„å†…å­˜é‡Šæ”¾å›æ“ä½œç³»ç»Ÿï¼Œä»¥ä¾›å…¶ä»–ç¨‹åº(æˆ–å˜é‡)ä½¿ç”¨ã€‚<code>ç„¶è€Œï¼Œä»æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºé•¿åº¦ä¸º1~20çš„å…ƒç»„ï¼Œå³ä½¿å®ƒä»¬ä¸å†è¢«ä½¿ç”¨ï¼Œå®ƒä»¬çš„ç©ºé—´ä¹Ÿä¸ä¼šç«‹åˆ»è¢«è¿˜ç»™ç³»ç»Ÿï¼Œè€Œæ˜¯ç•™å¾…æœªæ¥ä½¿ç”¨</code>ã€‚è¿™æ„å‘³ç€å½“æœªæ¥éœ€è¦ä¸€ä¸ªåŒæ ·å¤§å°çš„æ–°å…ƒç»„æ—¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦å‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å—å†…å­˜æ¥å­˜æ”¾æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æœ‰äº†é¢„ç•™çš„å†…å­˜ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20191007131407450.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æˆ‘ä»¬å¯ä»¥éªŒè¯èµ„æºç¼“å­˜è¿™ä¸€ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°åˆå§‹åŒ–ä¸€ä¸ªåˆ—è¡¨æ¶ˆè€—çš„æ—¶é—´æ˜¯åˆå§‹åŒ–ä¸€ä¸ªå…ƒç»„æ¶ˆè€—æ—¶é—´çš„6å€ï¼å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼ŒæŸäº›åœºæ™¯ä¸­åœ¨ä¸€ä¸ªå¾ªç¯ä¸­é¢‘ç¹åˆ›å»ºåˆ—è¡¨ï¼Œè€—æ—¶è¿˜æ˜¯éå¸¸å¯è§‚çš„ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨å…ƒç»„æ¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚<br><img src="https://img-blog.csdnimg.cn/20191007132116239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;åŒºåˆ«&quot;&gt;&lt;a href=&quot;#åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;åŒºåˆ«&quot;&gt;&lt;/a&gt;åŒºåˆ«&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;åˆ—è¡¨æ˜¯&lt;code&gt;åŠ¨æ€æ•°ç»„&lt;/code&gt;ï¼Œå®ƒä»¬å¯å˜ä¸”å¯ä»¥é‡è®¾é•¿åº¦(æ”¹å˜å…¶å†…éƒ¨å…ƒç´ çš„ä¸ªæ•°)ã€‚&lt;/li&gt;
&lt;li&gt;å…ƒç»„æ˜¯&lt;code&gt;é™æ€æ•°ç»„&lt;/code&gt;ï¼Œå®ƒä»¬ä¸å¯å˜ï¼Œä¸”å…¶å†…éƒ¨æ•°æ®ä¸€æ—¦åˆ›å»ºä¾¿æ— æ³•æ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;å…ƒç»„ç¼“å­˜äºPythonè¿è¡Œæ—¶ç¯å¢ƒï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨å…ƒç»„æ—¶æ— é¡»è®¿é—®å†…æ ¸å» åˆ†é…å†…å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™äº›åŒºåˆ«æ­ç¤ºäº†ä¸¤è€…åœ¨è®¾è®¡å“²å­¦ä¸Šçš„ä¸åŒ:å…ƒç»„ç”¨äºæè¿°ä¸€ä¸ªä¸ä¼šæ”¹å˜çš„äº‹ç‰©çš„å¤šä¸ªå±æ€§ï¼Œè€Œåˆ—è¡¨å¯è¢«ç”¨äºä¿å­˜å¤šä¸ªäº’ç›¸ç‹¬ç«‹å¯¹è±¡çš„æ•°æ®é›†åˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
      <category term="Pythonæºç " scheme="http://kunxiang.wang/tags/Python%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>æµ…æPythonä¸­åˆ—è¡¨æ“ä½œä¹‹*å’Œ*=</title>
    <link href="http://kunxiang.wang/2019/10/07/%E6%B5%85%E6%9E%90Python%E4%B8%AD%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B-%E5%92%8C/"/>
    <id>http://kunxiang.wang/2019/10/07/æµ…æPythonä¸­åˆ—è¡¨æ“ä½œä¹‹-å’Œ/</id>
    <published>2019-10-06T16:42:03.000Z</published>
    <updated>2019-10-07T05:33:14.349Z</updated>
    
    <content type="html"><![CDATA[<p>åˆå­¦Pythonæ—¶æ€»æ˜¯ä¼šå°†a*=nç†è§£ä¸ºa=a*nï¼Œç¨å¾®æ·±å…¥åå°±ä¼šçŸ¥é“åœ¨Pythonä¸­çš„ä¸åŒï¼Œå…¶ä¸­<em>è°ƒç”¨<strong>mul</strong> ï¼Œè€Œ</em>=è°ƒç”¨<strong>imul</strong> ã€‚</p><p>å¯¹äºlistå¯¹è±¡ä¹Ÿæ”¯æŒä¹˜æ³•æ“ä½œï¼Œæˆªæ­¢åˆ°Python3.7ç‰ˆæœ¬ï¼Œä¸Šè¿°ä»ç„¶æ˜¯æˆç«‹çš„ã€‚æˆ‘ä»¬çŸ¥é“listæ˜¯ç”±Cå®ç°çš„ï¼Œæ‰€ä»¥çœŸæ­£çš„åº•å±‚è°ƒç”¨è‚¯å®šæ˜¯Cçš„å®ç°ã€‚è§‚å¯Ÿlistå¯¹è±¡çš„Cå®ç°çš„æºç æˆ‘ä»¬ä¼šçŸ¥é“ä¹˜æ³•*æ“ä½œè°ƒç”¨list_repeatï¼Œ*=ä¼šè°ƒç”¨list_inplace_repeatï¼Œä¸‹é¢åˆ†åˆ«çœ‹ä¸€ä¸‹ä¸¤è€…çš„Cå®ç°æ–¹å¼ã€‚</p><h3 id="â–-â€“-gt-list-repeat"><a href="#â–-â€“-gt-list-repeat" class="headerlink" title="â–* â€“&gt; list_repeat"></a>â–* â€“&gt; list_repeat</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> PyObject *</span><br><span class="line">list_repeat(PyListObject *a, Py_ssize_t n)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    size = Py_SIZE(a) * n;</span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> PyList_New(<span class="number">0</span>);</span><br><span class="line">    np = (PyListObject *) list_new_prealloc(size);</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> (PyObject *) np;</span><br><span class="line">&#125;</span><br><span class="line">ä»ä»¥ä¸Šå¯ä»¥çœ‹å‡ºï¼Œlist_repeatæ–¹æ³•éœ€è¦å¤šå°‘ç©ºé—´å°±ç”³è¯·å¤šå°‘ç©ºé—´ï¼Œè¯¥æ“ä½œè¿”å›çš„ä¸€ä¸ªæ–°çš„åˆ—è¡¨å¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure><h3 id="â–-â€“-gt-list-inplace-repeat"><a href="#â–-â€“-gt-list-inplace-repeat" class="headerlink" title="â–*= â€“&gt; list_inplace_repeat"></a>â–*= â€“&gt; list_inplace_repeat</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> PyObject *</span><br><span class="line">list_inplace_repeat(PyListObject *self, Py_ssize_t n)</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    size = PyList_GET_SIZE(self);</span><br><span class="line">    <span class="keyword">if</span> (list_resize(self, size*n) &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span></span><br><span class="line">list_resize(PyListObject *self, Py_ssize_t newsize)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (allocated &gt;= newsize &amp;&amp; newsize &gt;= (allocated &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">        assert(self-&gt;ob_item != <span class="literal">NULL</span> || newsize == <span class="number">0</span>);</span><br><span class="line">        Py_SIZE(self) = newsize;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    new_allocated = (<span class="keyword">size_t</span>)newsize + (newsize &gt;&gt; <span class="number">3</span>) + (newsize &lt; <span class="number">9</span> ? <span class="number">3</span> : <span class="number">6</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>list_inplace_repeatä»£ç ä¸­é€šè¿‡è°ƒç”¨list_resizeæ¥è¿›è¡Œæ‰©å®¹ï¼Œå¹¶å‘Šè¯‰å®ƒè¿™ä¸ªåˆ—è¡¨éœ€è¦å®¹çº³size*nä¸ªå…ƒç´ ã€‚ä»list_resizeä»£ç æ¥çœ‹ï¼Œå½“allocatedç©ºé—´è¶³å¤Ÿæ—¶ï¼Œä¸ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œã€‚ä½†æ˜¯æ–°ç”³è¯·çš„ç©ºé—´æ€»æ˜¯æ¯”æ‰€éœ€è¦çš„å¤§çš„ã€‚å¦‚æœè¿›è¡Œpopç­‰å‡å°listå…ƒç´ æ•°é‡çš„æ“ä½œæ¥çœ‹ï¼Œå®é™…ä¸Šåˆ—è¡¨çš„å¤§å°ä¹Ÿä¼šæŒ‰ç…§ç›¸åº”ç­–ç•¥è¿›è¡Œç¼©å‡æ“ä½œã€‚</p><blockquote><p>If the newsize falls lower than half the allocated size, then proceed with the realloc() to shrink the list. â€” From cpython</p></blockquote><h3 id="â–æ€»ç»“"><a href="#â–æ€»ç»“" class="headerlink" title="â–æ€»ç»“"></a>â–æ€»ç»“</h3><ol><li>*=ä¼šè°ƒç”¨list_resizeï¼Œå¯èƒ½ä¼šå¼•èµ·listç©ºé—´æ‰©å®¹çš„æƒ…å†µï¼Œè€Œä¸”æ­¤æ—¶listå¯¹è±¡å ç”¨ç©ºé—´ä¼šæ¯”å®é™…listå¯¹è±¡ä¸­å…ƒç´ å ç”¨ç©ºé—´å¤§ã€‚</li><li>*ä¼šæŒ‰éœ€è·å–ç”³è¯·ç©ºé—´å¤§å°ï¼Œä¸ä¼šè°ƒç”¨list_resizeæ–¹æ³•ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åˆå­¦Pythonæ—¶æ€»æ˜¯ä¼šå°†a*=nç†è§£ä¸ºa=a*nï¼Œç¨å¾®æ·±å…¥åå°±ä¼šçŸ¥é“åœ¨Pythonä¸­çš„ä¸åŒï¼Œå…¶ä¸­&lt;em&gt;è°ƒç”¨&lt;strong&gt;mul&lt;/strong&gt; ï¼Œè€Œ&lt;/em&gt;=è°ƒç”¨&lt;strong&gt;imul&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºlistå¯¹è±¡ä¹Ÿæ”¯æŒä¹˜æ³•æ“ä½œï¼Œæˆªæ­¢åˆ°P
      
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
      <category term="Pythonæºç " scheme="http://kunxiang.wang/tags/Python%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>ç¥ç»ç½‘ç»œçš„å­¦ä¹ ä¸ºä½•è¦è®¾å®šæŸå¤±å‡½æ•°ï¼Ÿ</title>
    <link href="http://kunxiang.wang/2019/10/01/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%BA%E4%BD%95%E8%A6%81%E8%AE%BE%E5%AE%9A%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0%EF%BC%9F/"/>
    <id>http://kunxiang.wang/2019/10/01/ç¥ç»ç½‘ç»œçš„å­¦ä¹ ä¸ºä½•è¦è®¾å®šæŸå¤±å‡½æ•°ï¼Ÿ/</id>
    <published>2019-09-30T16:17:38.000Z</published>
    <updated>2019-09-30T16:47:28.497Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œæ‰€è¯´çš„â€œå­¦ä¹ â€æ˜¯æŒ‡ä»è®­ç»ƒæ•°æ®ä¸­<strong>è‡ªåŠ¨</strong>è·å–æœ€ä¼˜æƒé‡å‚æ•°çš„è¿‡ç¨‹ã€‚å­¦ä¹ çš„ç›®çš„å°±æ˜¯ä»¥è¯¥æŸå¤±å‡½æ•°ä¸ºåŸºå‡†ï¼Œæ‰¾å‡ºèƒ½ä½¿å®ƒçš„å€¼è¾¾åˆ°æœ€å°çš„æƒé‡å‚æ•°ã€‚</p><p>å¯èƒ½ä¼šæœ‰äººé—®ï¼šæˆ‘ä»¬æƒ³è·å¾—çš„æ˜¯èƒ½æé«˜è¯†åˆ«ç²¾åº¦çš„å‚æ•°ï¼Œç‰¹æ„å†å¯¼å…¥ä¸€ä¸ªæŸå¤±å‡½æ•°ä¸æ˜¯æœ‰äº›é‡å¤åŠ³åŠ¨å—?æ—¢ç„¶æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è·å¾—ä½¿è¯†åˆ«ç²¾åº¦å°½å¯èƒ½é«˜çš„ç¥ç»ç½‘ç»œï¼Œé‚£ä¸æ˜¯åº”è¯¥æŠŠè¯†åˆ«ç²¾åº¦ä½œä¸ºæŒ‡æ ‡å—?</p><a id="more"></a><p>å¬èµ·æ¥å¾ˆæœ‰é“ç†ï¼</p><p>å¯¹äºè¿™ä¸€ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®<strong>â€œå¯¼æ•°â€œ</strong>åœ¨ç¥ç»ç½‘ç»œå­¦ä¹ ä¸­çš„ä½œç”¨æ¥å›ç­”ã€‚ åœ¨ç¥ç»ç½‘ç»œçš„å­¦ä¹ ä¸­ï¼Œå¯»æ‰¾æœ€ä¼˜å‚æ•°(æƒé‡å’Œåç½®)æ—¶ï¼Œ è¦å¯»æ‰¾ä½¿æŸå¤±å‡½æ•°çš„å€¼å°½å¯èƒ½å°çš„å‚æ•°ã€‚ä¸ºäº†æ‰¾åˆ°ä½¿æŸå¤±å‡½æ•°çš„å€¼å°½å¯èƒ½å° çš„åœ°æ–¹ï¼Œéœ€è¦è®¡ç®—å‚æ•°çš„å¯¼æ•°(ç¡®åˆ‡åœ°è®²æ˜¯æ¢¯åº¦)ï¼Œç„¶åä»¥è¿™ä¸ªå¯¼æ•°ä¸ºæŒ‡å¼•ï¼Œ é€æ­¥æ›´æ–°å‚æ•°çš„å€¼ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œç°åœ¨æˆ‘ä»¬æ¥å…³æ³¨è¿™ä¸ªç¥ç»ç½‘ç»œä¸­çš„æŸä¸€ä¸ªæƒé‡å‚æ•°ã€‚æ­¤æ—¶ï¼Œå¯¹è¯¥æƒé‡å‚æ•°çš„æŸå¤±å‡½æ•°æ±‚å¯¼ï¼Œæ­¤å¤„å¯¼æ•°çš„å«ä¹‰å¯ä»¥ç†è§£ä¸ºâ€œå¦‚æœç¨å¾®æ”¹å˜è¿™ä¸ªæƒé‡å‚æ•°çš„å€¼ï¼ŒæŸå¤±å‡½æ•°çš„å€¼ä¼šå¦‚ä½•å˜åŒ–â€ã€‚<strong>å¦‚æœå¯¼æ•°çš„å€¼ä¸ºè´Ÿï¼Œé€šè¿‡ä½¿è¯¥æƒé‡å‚æ•°å‘æ­£æ–¹å‘æ”¹å˜ï¼Œå¯ä»¥å‡å°æŸå¤±å‡½æ•°çš„å€¼ï¼›åè¿‡æ¥ï¼Œå¦‚æœå¯¼æ•°çš„å€¼ä¸ºæ­£ï¼Œ åˆ™é€šè¿‡ä½¿è¯¥æƒé‡å‚æ•°å‘è´Ÿæ–¹å‘æ”¹å˜ï¼Œå¯ä»¥å‡å°æŸå¤±å‡½æ•°çš„å€¼</strong>ã€‚ä¸è¿‡ï¼Œå½“å¯¼æ•°ä¸º 0 æ—¶ï¼Œæ— è®ºæƒé‡å‚æ•°å‘å“ªä¸ªæ–¹å‘å˜åŒ–ï¼ŒæŸå¤±å‡½æ•°çš„å€¼éƒ½ä¸ä¼šæ”¹å˜ï¼Œæ­¤æ—¶è¯¥æƒé‡å‚æ•°çš„æ›´æ–°ä¼šåœåœ¨æ­¤å¤„ã€‚</p><p><strong>åœ¨è¿›è¡Œç¥ç»ç½‘ç»œçš„å­¦ä¹ æ—¶ï¼Œä¸èƒ½å°†è¯†åˆ«ç²¾åº¦ä½œä¸ºæŒ‡æ ‡ã€‚å› ä¸ºå¦‚æœä»¥è¯†åˆ«ç²¾åº¦ä¸ºæŒ‡æ ‡ï¼Œåˆ™å‚æ•°çš„å¯¼æ•°åœ¨ç»å¤§å¤šæ•°åœ°æ–¹éƒ½ä¼šå˜ä¸º 0ï¼Œå¯¼è‡´å‚æ•°æ— æ³•æ›´æ–°ã€‚</strong>é‚£ä¸ºä»€ä¹ˆç”¨è¯†åˆ«ç²¾åº¦ä½œä¸ºæŒ‡æ ‡æ—¶ï¼Œå‚æ•°çš„å¯¼æ•°åœ¨ç»å¤§å¤šæ•°åœ°æ–¹éƒ½ä¼šå˜æˆ0å‘¢ï¼Ÿ</p><p>ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥æ€è€ƒå¦ä¸€ä¸ªå…·ä½“ä¾‹å­ã€‚å‡è®¾æŸä¸ªç¥ç»ç½‘ç»œæ­£ç¡®è¯†åˆ«å‡ºäº† 100ä¸ªè®­ç»ƒæ•°æ®ä¸­çš„32ç¬”ï¼Œæ­¤æ—¶è¯†åˆ«ç²¾åº¦ä¸º 32 %ã€‚å¦‚æœä»¥è¯†åˆ«ç²¾åº¦ä¸ºæŒ‡æ ‡ï¼Œå³ä½¿ç¨å¾®æ”¹å˜æƒé‡å‚æ•°çš„å€¼ï¼Œè¯†åˆ«ç²¾åº¦ä¹Ÿä»å°†ä¿æŒåœ¨ 32 %ï¼Œä¸ä¼šå‡ºç°å˜åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»…ä»…å¾®è°ƒå‚æ•°ï¼Œæ˜¯æ— æ³•æ”¹å–„è¯†åˆ«ç²¾åº¦çš„ã€‚å³ä¾¿è¯†åˆ«ç²¾åº¦æœ‰æ‰€æ”¹å–„ï¼Œå®ƒçš„å€¼ä¹Ÿä¸ä¼šåƒ 32.0123 . . . % è¿™æ ·è¿ç»­å˜åŒ–ï¼Œè€Œæ˜¯å˜ä¸º 33 %ã€ 34 % è¿™æ ·çš„<strong>ä¸è¿ç»­çš„ã€ç¦»æ•£çš„å€¼</strong>ã€‚è€Œå¦‚æœæŠŠæŸå¤±å‡½æ•°ä½œä¸ºæŒ‡æ ‡ï¼Œåˆ™å½“å‰æŸå¤±å‡½æ•°çš„å€¼å¯ä»¥è¡¨ç¤ºä¸º 0.92543 . . . è¿™æ ·çš„å€¼ã€‚å¹¶ä¸”ï¼Œå¦‚æœç¨å¾®æ”¹å˜ä¸€ä¸‹å‚æ•° çš„å€¼ï¼Œå¯¹åº”çš„æŸå¤±å‡½æ•°ä¹Ÿä¼šåƒ 0.93432 . . . è¿™æ ·å‘ç”Ÿè¿ç»­æ€§çš„å˜åŒ–ã€‚</p><p>ä½œä¸ºæ¿€æ´»å‡½æ•°çš„é˜¶è·ƒå‡½æ•°ä¹Ÿæœ‰åŒæ ·çš„æƒ…å†µã€‚å‡ºäºç›¸åŒçš„åŸå› ï¼Œå¦‚æœä½¿ç”¨é˜¶è·ƒå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œç¥ç»ç½‘ç»œçš„å­¦ä¹ å°†æ— æ³•è¿›è¡Œã€‚åŸå› æ˜¯é˜¶è·ƒå‡½æ•°çš„å¯¼æ•°åœ¨ç»å¤§å¤šæ•°åœ°æ–¹(é™¤äº†0ä»¥å¤–çš„åœ°æ–¹)å‡ä¸º0ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½¿ç”¨äº†é˜¶è·ƒå‡½æ•°ï¼Œé‚£ä¹ˆå³ä¾¿å°†æŸå¤±å‡½æ•°ä½œä¸ºæŒ‡æ ‡ï¼Œå‚æ•°çš„å¾®å°å˜åŒ–ä¹Ÿä¼šè¢«é˜¶è·ƒå‡½æ•°<strong>æŠ¹æ€</strong>ï¼Œå¯¼è‡´æŸå¤±å‡½æ•°çš„å€¼ä¸ä¼šäº§ç”Ÿä»»ä½•å˜åŒ–ã€‚</p><p>è€Œ sigmoid å‡½æ•°ï¼Œä¸ä»…å‡½æ•°çš„è¾“å‡º(ç«–è½´çš„å€¼)æ˜¯è¿ç»­å˜åŒ–çš„ï¼Œæ›²çº¿çš„æ–œç‡(å¯¼æ•°) ä¹Ÿæ˜¯è¿ç»­å˜åŒ–çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsigmoid å‡½æ•°çš„å¯¼æ•°åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸ä¸º 0ã€‚è¿™å¯¹ç¥ç»ç½‘ç»œçš„å­¦ä¹ éå¸¸é‡è¦ã€‚å¾—ç›Šäºè¿™ä¸ªæ–œç‡ä¸ä¼šä¸º 0 çš„æ€§è´¨ï¼Œç¥ç»ç½‘ç»œçš„å­¦ä¹ å¾—ä»¥æ­£ç¡®è¿›è¡Œã€‚</p><p><img src="https://img-blog.csdnimg.cn/20191001001019693.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">â€”-<br>å‚è€ƒæ•°æ®<br>æ·±åº¦å­¦ä¹ å…¥é—¨-Deep Learning from Scratch</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é‡Œæ‰€è¯´çš„â€œå­¦ä¹ â€æ˜¯æŒ‡ä»è®­ç»ƒæ•°æ®ä¸­&lt;strong&gt;è‡ªåŠ¨&lt;/strong&gt;è·å–æœ€ä¼˜æƒé‡å‚æ•°çš„è¿‡ç¨‹ã€‚å­¦ä¹ çš„ç›®çš„å°±æ˜¯ä»¥è¯¥æŸå¤±å‡½æ•°ä¸ºåŸºå‡†ï¼Œæ‰¾å‡ºèƒ½ä½¿å®ƒçš„å€¼è¾¾åˆ°æœ€å°çš„æƒé‡å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¯èƒ½ä¼šæœ‰äººé—®ï¼šæˆ‘ä»¬æƒ³è·å¾—çš„æ˜¯èƒ½æé«˜è¯†åˆ«ç²¾åº¦çš„å‚æ•°ï¼Œç‰¹æ„å†å¯¼å…¥ä¸€ä¸ªæŸå¤±å‡½æ•°ä¸æ˜¯æœ‰äº›é‡å¤åŠ³åŠ¨å—?æ—¢ç„¶æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è·å¾—ä½¿è¯†åˆ«ç²¾åº¦å°½å¯èƒ½é«˜çš„ç¥ç»ç½‘ç»œï¼Œé‚£ä¸æ˜¯åº”è¯¥æŠŠè¯†åˆ«ç²¾åº¦ä½œä¸ºæŒ‡æ ‡å—?&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://kunxiang.wang/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://kunxiang.wang/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="ç¥ç»ç½‘ç»œ" scheme="http://kunxiang.wang/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>ç¥ç»ç½‘ç»œçš„æ¿€æ´»å‡½æ•°ä¸ºä»€ä¹ˆè¦ä½¿ç”¨éçº¿æ€§å‡½æ•°</title>
    <link href="http://kunxiang.wang/2019/09/29/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%87%BD%E6%95%B0/"/>
    <id>http://kunxiang.wang/2019/09/29/ç¥ç»ç½‘ç»œçš„æ¿€æ´»å‡½æ•°ä¸ºä»€ä¹ˆè¦ä½¿ç”¨éçº¿æ€§å‡½æ•°/</id>
    <published>2019-09-29T02:58:43.000Z</published>
    <updated>2019-09-29T03:02:35.783Z</updated>
    
    <content type="html"><![CDATA[<h3 id="â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°"><a href="#â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°" class="headerlink" title="â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°"></a>â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°</h3><p>åœ¨ç¥ç»å…ƒä¸­ï¼Œè¾“å…¥çš„inputsé€šè¿‡åŠ æƒæ±‚å’Œï¼Œç„¶åè¢«ä½œç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ¿€æ´»å‡½æ•° <code>Activation Function</code>ã€‚æ¿€æ´»å‡½æ•°åœ¨ç¥ç»ç½‘ç»œä¸­çš„ä½ç½®å¦‚å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20190908231352415.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><a id="more"></a><h3 id="â–ä¸ºä»€ä¹ˆè¦ç”¨éçº¿æ€§å‡½æ•°"><a href="#â–ä¸ºä»€ä¹ˆè¦ç”¨éçº¿æ€§å‡½æ•°" class="headerlink" title="â–ä¸ºä»€ä¹ˆè¦ç”¨éçº¿æ€§å‡½æ•°"></a>â–ä¸ºä»€ä¹ˆè¦ç”¨éçº¿æ€§å‡½æ•°</h3><p>è¦è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åè¿‡æ¥æ€è€ƒä¸€ä¸‹ï¼Œ<code>ä¸ºä»€ä¹ˆæ¿€æ´»å‡½æ•°ä¸èƒ½ä½¿ç”¨çº¿æ€§å‡½æ•°</code>ã€‚<br>å¦‚æœä½¿ç”¨çº¿æ€§å‡½æ•°ï¼Œæ¯ä¸€å±‚è¾“å‡ºéƒ½æ˜¯ä¸Šå±‚è¾“å…¥çš„çº¿æ€§å‡½æ•°ï¼Œæ— è®ºç¥ç»ç½‘ç»œæœ‰å¤šå°‘å±‚ï¼Œè¾“å‡ºéƒ½æ˜¯è¾“å…¥çš„<code>çº¿æ€§ç»„åˆ</code>ã€‚åŠ æ·±ç¥ç»ç½‘ç»œçš„å±‚æ•°å°±æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚çº¿æ€§å‡½æ•°çš„é—®é¢˜åœ¨äºä¸ç®¡åŠ æ·±å±‚æ•°åˆ°å¤šå°‘ï¼Œæ€»æ˜¯å­˜åœ¨ä¸ä¹‹ç­‰æ•ˆçš„<code>ã€Œæ— éšè—å±‚ã€</code>çš„ç¥ç»ç½‘ç»œã€‚ä¸ºäº†ç¨å¾®ç›´è§‚çš„ç†è§£è¿™ä¸€ç‚¹ï¼Œè€ƒè™‘ä¸‹é¢ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><p>å­˜åœ¨ä¸€ä¸ªçº¿æ€§å‡½æ•°<code>f(x)=kx(kâ‰ 0)</code>ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå°†<code>y=f(f(f(x)))</code>å¯¹åº”ä¸‰å±‚çš„ç¥ç»ç½‘ç»œã€‚å¾ˆæ˜æ˜¾å¯ä»¥æƒ³åˆ°åŒæ ·çš„å¤„ç†å¯ä»¥ç”±<code>y=ax(a=k^3)</code>ï¼Œä¸€ä¸ªæ²¡æœ‰éšè—å±‚çš„ç¥ç»ç½‘ç»œæ¥è¡¨ç¤ºã€‚è¯¥ä¾‹å­ä»…ä»…æ˜¯ä¸€ä¸ªè¿‘ä¼¼ï¼Œå®é™…ä¸­çš„ç¥ç»ç½‘ç»œçš„è¿ç®—è¦æ¯”è¿™ä¸ªä¾‹å­å¤æ‚å¾ˆå¤šï¼Œä½†ä¸å½±å“ç»“è®ºçš„æˆç«‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°æ—¶ï¼Œæ— æ³•å‘æŒ¥å¤šå±‚ç½‘ç»œå¸¦æ¥çš„ä¼˜åŠ¿ã€‚</p><p>ç›¸åå¦‚æœä½¿ç”¨éçº¿æ€§å‡½æ•°ï¼Œæ¿€æ´»å‡½æ•°ç»™ç¥ç»å…ƒå¼•å…¥äº†éçº¿æ€§å› ç´ ï¼Œä½¿å¾—ç¥ç»ç½‘ç»œå¯ä»¥ä»»æ„é€¼è¿‘ä»»ä½•éçº¿æ€§å‡½æ•°ï¼Œè¿™æ ·ç¥ç»ç½‘ç»œå°±å¯ä»¥åº”ç”¨åˆ°ä¼—å¤šçš„éçº¿æ€§æ¨¡å‹ä¸­ã€‚</p><p>ä»¥ä¸Šï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°&quot;&gt;&lt;a href=&quot;#â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°&quot;&gt;&lt;/a&gt;â–ä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°&lt;/h3&gt;&lt;p&gt;åœ¨ç¥ç»å…ƒä¸­ï¼Œè¾“å…¥çš„inputsé€šè¿‡åŠ æƒæ±‚å’Œï¼Œç„¶åè¢«ä½œç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ¿€æ´»å‡½æ•° &lt;code&gt;Activation Function&lt;/code&gt;ã€‚æ¿€æ´»å‡½æ•°åœ¨ç¥ç»ç½‘ç»œä¸­çš„ä½ç½®å¦‚å›¾æ‰€ç¤ºï¼š&lt;br&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20190908231352415.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MTUyMjQ0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://kunxiang.wang/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://kunxiang.wang/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="ç¥ç»ç½‘ç»œ" scheme="http://kunxiang.wang/tags/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å™¨ä¸­çš„ç‰©ç†CPUã€é€»è¾‘CPUå’ŒCPUæ ¸æ•°</title>
    <link href="http://kunxiang.wang/2019/06/20/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%AD%E7%9A%84%E7%89%A9%E7%90%86CPU%E3%80%81%E9%80%BB%E8%BE%91CPU%E5%92%8CCPU%E6%A0%B8%E6%95%B0/"/>
    <id>http://kunxiang.wang/2019/06/20/æœåŠ¡å™¨ä¸­çš„ç‰©ç†CPUã€é€»è¾‘CPUå’ŒCPUæ ¸æ•°/</id>
    <published>2019-06-20T14:18:07.000Z</published>
    <updated>2019-06-23T14:23:08.731Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é‡è¦æ¦‚å¿µ"><a href="#é‡è¦æ¦‚å¿µ" class="headerlink" title="é‡è¦æ¦‚å¿µ"></a>é‡è¦æ¦‚å¿µ</h2><h3 id="ç‰©ç†CPU"><a href="#ç‰©ç†CPU" class="headerlink" title="ç‰©ç†CPU"></a>ç‰©ç†CPU</h3><p>å®é™…Serverä¸­æ’æ§½ä¸Šçš„CPUä¸ªæ•°<br>ç‰©ç†cpuæ•°é‡ï¼Œå¯ä»¥æ•°ä¸é‡å¤çš„ physical id æœ‰å‡ ä¸ª,æŸ¥çœ‹æ–¹æ³•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"physical id"</span> /proc/cpuinfo|sort|uniq|wc -l</span><br><span class="line">2</span><br><span class="line">```         </span><br><span class="line"></span><br><span class="line"><span class="comment">### CPUæ ¸æ•°           </span></span><br><span class="line">å•å—CPUä¸Šé¢èƒ½å¤„ç†æ•°æ®çš„èŠ¯ç‰‡ç»„çš„æ•°é‡ï¼Œå¦‚åŒæ ¸ã€å››æ ¸ç­‰ ï¼ˆcpu coresï¼‰ã€‚</span><br><span class="line">æ¯”å¦‚ç°åœ¨çš„i5 760,æ˜¯åŒæ ¸å¿ƒå››çº¿ç¨‹çš„CPUã€è€Œ i5 2250 æ˜¯å››æ ¸å¿ƒå››çº¿ç¨‹çš„CPU ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰©ç†CPUä¸ªæ•°Ã—æ¯é¢—æ ¸æ•°å°±åº”è¯¥ç­‰äºé€»è¾‘CPUçš„ä¸ªæ•°ï¼Œå¦‚æœä¸ç›¸ç­‰çš„è¯ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡å™¨çš„CPUæ”¯æŒè¶…çº¿ç¨‹æŠ€æœ¯    </span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">cat /proc/cpuinfo |grep <span class="string">"cpu cores"</span>|uniq</span><br><span class="line">grep <span class="string">"cpu cores"</span> /proc/cpuinfo|uniq|awk -F <span class="string">":"</span> <span class="string">"&#123;print <span class="variable">$2</span>&#125;"</span></span><br><span class="line">8</span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘CPU"><a href="#é€»è¾‘CPU" class="headerlink" title="é€»è¾‘CPU"></a>é€»è¾‘CPU</h3><p>Linuxç”¨æˆ·å¯¹ /proc/cpuinfo è¿™ä¸ªæ–‡ä»¶è‚¯å®šä¸é™Œç”Ÿ. å®ƒæ˜¯ç”¨æ¥å­˜å‚¨cpuç¡¬ä»¶ä¿¡æ¯çš„<br>ä¿¡æ¯å†…å®¹åˆ†åˆ«åˆ—å‡ºäº†processor 0 â€“ n çš„è§„æ ¼ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ è®¤ä¸ºnå°±æ˜¯çœŸå®çš„cpuæ•°çš„è¯, å°±å¤§é”™ç‰¹é”™äº†ã€‚</p><p>ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬è®¤ä¸º<code>ä¸€é¢—cpuå¯ä»¥æœ‰å¤šæ ¸</code>ï¼ŒåŠ ä¸Š<code>intelçš„è¶…çº¿ç¨‹æŠ€æœ¯(HT)</code>, å¯ä»¥åœ¨é€»è¾‘ä¸Šå†åˆ†ä¸€å€æ•°é‡çš„cpu coreå‡ºæ¥<br><code>é€»è¾‘CPUæ•°é‡=ç‰©ç†cpuæ•°é‡ x cpu cores è¿™ä¸ªè§„æ ¼å€¼ x 2(å¦‚æœæ”¯æŒå¹¶å¼€å¯ht)</code>ã€‚</p><p><code>å¦‚æœæœ‰ä¸€ä¸ªä»¥ä¸Šé€»è¾‘å¤„ç†å™¨æ‹¥æœ‰ç›¸åŒçš„ core id å’Œ physical idï¼Œåˆ™è¯´æ˜ç³»ç»Ÿæ”¯æŒè¶…çº¿ç¨‹ï¼ˆHTï¼‰æŠ€æœ¯</code></p><p>å¤‡æ³¨ä¸€ä¸‹ï¼šLinuxä¸‹topæŸ¥çœ‹çš„CPUä¹Ÿæ˜¯é€»è¾‘CPUä¸ªæ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo| grep <span class="string">"processor"</span> |wc -l</span><br><span class="line">32ï¼ˆæ”¯æŒè¶…çº¿ç¨‹ï¼‰</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="æŸ¥çœ‹æ–¹æ³•"><a href="#æŸ¥çœ‹æ–¹æ³•" class="headerlink" title="æŸ¥çœ‹æ–¹æ³•"></a>æŸ¥çœ‹æ–¹æ³•</h2><p>é€šè¿‡cat /proc/cpuinfocpuæ¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯ã€‚</p><blockquote><ul><li>vendor id     å¦‚æœå¤„ç†å™¨ä¸ºè‹±ç‰¹å°”å¤„ç†å™¨ï¼Œåˆ™å­—ç¬¦ä¸²æ˜¯ GenuineIntelã€‚</li><li>processor     åŒ…æ‹¬è¿™ä¸€é€»è¾‘å¤„ç†å™¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>physical id   åŒ…æ‹¬æ¯ä¸ªç‰©ç†å°è£…çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>core id       ä¿å­˜æ¯ä¸ªå†…æ ¸çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>siblings      åˆ—å‡ºäº†ä½äºç›¸åŒç‰©ç†å°è£…ä¸­çš„é€»è¾‘å¤„ç†å™¨çš„æ•°é‡ã€‚</li><li>cpu cores     åŒ…å«ä½äºç›¸åŒç‰©ç†å°è£…ä¸­çš„å†…æ ¸æ•°é‡ã€‚</li></ul></blockquote><ol><li>æ‹¥æœ‰ç›¸åŒ physical id çš„æ‰€æœ‰é€»è¾‘å¤„ç†å™¨å…±äº«åŒä¸€ä¸ªç‰©ç†æ’åº§ï¼Œæ¯ä¸ª physical id ä»£è¡¨ä¸€ä¸ªå”¯ä¸€çš„ç‰©ç†å°è£…ã€‚</li><li>Siblings è¡¨ç¤ºä½äºè¿™ä¸€ç‰©ç†å°è£…ä¸Šçš„é€»è¾‘å¤„ç†å™¨çš„æ•°é‡ï¼Œå®ƒä»¬å¯èƒ½æ”¯æŒä¹Ÿå¯èƒ½ä¸æ”¯æŒè¶…çº¿ç¨‹ï¼ˆHTï¼‰æŠ€æœ¯ã€‚</li><li>æ¯ä¸ª core id å‡ä»£è¡¨ä¸€ä¸ªå”¯ä¸€çš„å¤„ç†å™¨å†…æ ¸ï¼Œæ‰€æœ‰å¸¦æœ‰ç›¸åŒ core id çš„é€»è¾‘å¤„ç†å™¨å‡ä½äºåŒä¸€ä¸ªå¤„ç†å™¨å†…æ ¸ä¸Šã€‚ç®€å•çš„è¯´ï¼šâ€œsiblingsâ€æŒ‡çš„æ˜¯ä¸€ä¸ªç‰©ç†CPUæœ‰å‡ ä¸ªé€»è¾‘CPUï¼Œâ€cpu coresâ€œæŒ‡çš„æ˜¯ä¸€ä¸ªç‰©ç†CPUæœ‰å‡ ä¸ªæ ¸ã€‚</li><li>å¦‚æœæœ‰ä¸€ä¸ªä»¥ä¸Šé€»è¾‘å¤„ç†å™¨æ‹¥æœ‰ç›¸åŒçš„ core id å’Œ physical idï¼Œåˆ™è¯´æ˜ç³»ç»Ÿæ”¯æŒè¶…çº¿ç¨‹ï¼ˆHTï¼‰æŠ€æœ¯ã€‚</li><li>å¦‚æœæœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„é€»è¾‘å¤„ç†å™¨æ‹¥æœ‰ç›¸åŒçš„ physical idï¼Œä½†æ˜¯ core idä¸åŒï¼Œåˆ™è¯´æ˜è¿™æ˜¯ä¸€ä¸ªå¤šå†…æ ¸å¤„ç†å™¨ã€‚cpu coresæ¡ç›®ä¹Ÿå¯ä»¥è¡¨ç¤ºæ˜¯å¦æ”¯æŒå¤šå†…æ ¸ã€‚</li></ol><h2 id="topå‘½ä»¤å…³äºcpuä½¿ç”¨ç‡"><a href="#topå‘½ä»¤å…³äºcpuä½¿ç”¨ç‡" class="headerlink" title="topå‘½ä»¤å…³äºcpuä½¿ç”¨ç‡"></a>topå‘½ä»¤å…³äºcpuä½¿ç”¨ç‡</h2><p>ä¸‹é¢åšä¸€ä¸ªç®€å•çš„æµ‹è¯•ï¼Œç»ˆç«¯ä¸­ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md5sum /dev/zero &amp;</span><br></pre></td></tr></table></figure></p><p>å¼€å¯topï¼Œå¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://upload-images.jianshu.io/upload_images/2952111-81c2a7654f73c645.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2019-06-20 at 22.53.34.png"></p><p>æŒ‰æ•°å­—é”®1åæŸ¥çœ‹æ‰€æœ‰æ ¸çš„ä½¿ç”¨ç‡ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/2952111-70b5f8c2b58f77cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2019-06-20 at 22.56.42.png"></p><p>å‘ç°ä½¿ç”¨topå‘½ä»¤ï¼Œå·¦ä¸Šè§’æ˜¾ç¤ºçš„æ˜¯æ•´ä½“è´Ÿè½½ï¼Œå³å•æ ¸çš„è´Ÿè½½æ•°é™¤ä»¥æ ¸æ•°ã€‚%CPUæ•°å€¼ä»£è¡¨å•ä¸ªæ ¸çš„ä½¿ç”¨ç‡ï¼Œè¶…è¿‡100%ä»£è¡¨ä½¿ç”¨å…¶ä»–æ ¸çš„è®¡ç®—èµ„æºã€‚</p><p>ç¬¬ä¸€è¡Œï¼š</p><ul><li>10:01:23 â€” å½“å‰ç³»ç»Ÿæ—¶é—´</li><li>126 days, 14:29 â€” ç³»ç»Ÿå·²ç»è¿è¡Œäº†126å¤©14å°æ—¶29åˆ†é’Ÿï¼ˆåœ¨è¿™æœŸé—´æ²¡æœ‰é‡å¯è¿‡ï¼‰</li><li>2 users â€” å½“å‰æœ‰2ä¸ªç”¨æˆ·ç™»å½•ç³»ç»Ÿ</li><li>load average: 1.15, 1.42, 1.44 â€” load averageåé¢çš„ä¸‰ä¸ªæ•°åˆ†åˆ«æ˜¯1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿçš„è´Ÿè½½æƒ…å†µã€‚load averageæ•°æ®æ˜¯æ¯éš”5ç§’é’Ÿæ£€æŸ¥ä¸€æ¬¡æ´»è·ƒçš„è¿›ç¨‹æ•°ï¼Œç„¶åæŒ‰ç‰¹å®šç®—æ³•è®¡ç®—å‡ºçš„æ•°å€¼ã€‚å¦‚æœè¿™ä¸ªæ•°<code>é™¤ä»¥é€»è¾‘CPUçš„æ•°é‡</code>ï¼Œ<code>ç»“æœé«˜äº5çš„æ—¶å€™å°±è¡¨æ˜ç³»ç»Ÿåœ¨è¶…è´Ÿè·è¿è½¬äº†ã€‚</code></li></ul><p>ç¬¬äºŒè¡Œï¼š</p><ul><li>Tasks â€” ä»»åŠ¡ï¼ˆè¿›ç¨‹ï¼‰ï¼Œç³»ç»Ÿç°åœ¨å…±æœ‰183ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­å¤„äºè¿è¡Œä¸­çš„æœ‰1ä¸ªï¼Œ182ä¸ªåœ¨ä¼‘çœ ï¼ˆsleepï¼‰ï¼ŒstopedçŠ¶æ€çš„æœ‰0ä¸ªï¼ŒzombieçŠ¶æ€ï¼ˆåƒµå°¸ï¼‰çš„æœ‰0ä¸ªã€‚</li></ul><p>ç¬¬ä¸‰è¡Œï¼šcpuçŠ¶æ€</p><ul><li>6.7% us â€” ç”¨æˆ·ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”ã€‚</li><li>0.4% sy â€” å†…æ ¸ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”ã€‚</li><li>0.0% ni â€” æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</li><li>92.9% id â€” ç©ºé—²CPUç™¾åˆ†æ¯”</li><li>0.0% wa â€” IOç­‰å¾…å ç”¨CPUçš„ç™¾åˆ†æ¯”</li><li>0.0% hi â€” ç¡¬ä¸­æ–­ï¼ˆHardware IRQï¼‰å ç”¨CPUçš„ç™¾åˆ†æ¯”</li><li>0.0% si â€” è½¯ä¸­æ–­ï¼ˆSoftware Interruptsï¼‰å ç”¨CPUçš„ç™¾åˆ†æ¯”</li></ul><hr>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é‡è¦æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#é‡è¦æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;é‡è¦æ¦‚å¿µ&quot;&gt;&lt;/a&gt;é‡è¦æ¦‚å¿µ&lt;/h2&gt;&lt;h3 id=&quot;ç‰©ç†CPU&quot;&gt;&lt;a href=&quot;#ç‰©ç†CPU&quot; class=&quot;headerlink&quot; title=&quot;ç‰©ç†CPU&quot;&gt;&lt;/a&gt;ç‰©ç†CPU&lt;/h3&gt;&lt;p&gt;å®é™…Serverä¸­æ’æ§½ä¸Šçš„CPUä¸ªæ•°&lt;br&gt;ç‰©ç†cpuæ•°é‡ï¼Œå¯ä»¥æ•°ä¸é‡å¤çš„ physical id æœ‰å‡ ä¸ª,æŸ¥çœ‹æ–¹æ³•&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;grep &lt;span class=&quot;string&quot;&gt;&quot;physical id&quot;&lt;/span&gt; /proc/cpuinfo|sort|uniq|wc -l&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### CPUæ ¸æ•°           &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å•å—CPUä¸Šé¢èƒ½å¤„ç†æ•°æ®çš„èŠ¯ç‰‡ç»„çš„æ•°é‡ï¼Œå¦‚åŒæ ¸ã€å››æ ¸ç­‰ ï¼ˆcpu coresï¼‰ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;æ¯”å¦‚ç°åœ¨çš„i5 760,æ˜¯åŒæ ¸å¿ƒå››çº¿ç¨‹çš„CPUã€è€Œ i5 2250 æ˜¯å››æ ¸å¿ƒå››çº¿ç¨‹çš„CPU ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰©ç†CPUä¸ªæ•°Ã—æ¯é¢—æ ¸æ•°å°±åº”è¯¥ç­‰äºé€»è¾‘CPUçš„ä¸ªæ•°ï¼Œå¦‚æœä¸ç›¸ç­‰çš„è¯ï¼Œåˆ™è¡¨ç¤ºæœåŠ¡å™¨çš„CPUæ”¯æŒè¶…çº¿ç¨‹æŠ€æœ¯    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /proc/cpuinfo |grep &lt;span class=&quot;string&quot;&gt;&quot;cpu cores&quot;&lt;/span&gt;|uniq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grep &lt;span class=&quot;string&quot;&gt;&quot;cpu cores&quot;&lt;/span&gt; /proc/cpuinfo|uniq|awk -F &lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&amp;#123;print &lt;span class=&quot;variable&quot;&gt;$2&lt;/span&gt;&amp;#125;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;é€»è¾‘CPU&quot;&gt;&lt;a href=&quot;#é€»è¾‘CPU&quot; class=&quot;headerlink&quot; title=&quot;é€»è¾‘CPU&quot;&gt;&lt;/a&gt;é€»è¾‘CPU&lt;/h3&gt;&lt;p&gt;Linuxç”¨æˆ·å¯¹ /proc/cpuinfo è¿™ä¸ªæ–‡ä»¶è‚¯å®šä¸é™Œç”Ÿ. å®ƒæ˜¯ç”¨æ¥å­˜å‚¨cpuç¡¬ä»¶ä¿¡æ¯çš„&lt;br&gt;ä¿¡æ¯å†…å®¹åˆ†åˆ«åˆ—å‡ºäº†processor 0 â€“ n çš„è§„æ ¼ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ è®¤ä¸ºnå°±æ˜¯çœŸå®çš„cpuæ•°çš„è¯, å°±å¤§é”™ç‰¹é”™äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬è®¤ä¸º&lt;code&gt;ä¸€é¢—cpuå¯ä»¥æœ‰å¤šæ ¸&lt;/code&gt;ï¼ŒåŠ ä¸Š&lt;code&gt;intelçš„è¶…çº¿ç¨‹æŠ€æœ¯(HT)&lt;/code&gt;, å¯ä»¥åœ¨é€»è¾‘ä¸Šå†åˆ†ä¸€å€æ•°é‡çš„cpu coreå‡ºæ¥&lt;br&gt;&lt;code&gt;é€»è¾‘CPUæ•°é‡=ç‰©ç†cpuæ•°é‡ x cpu cores è¿™ä¸ªè§„æ ¼å€¼ x 2(å¦‚æœæ”¯æŒå¹¶å¼€å¯ht)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;å¦‚æœæœ‰ä¸€ä¸ªä»¥ä¸Šé€»è¾‘å¤„ç†å™¨æ‹¥æœ‰ç›¸åŒçš„ core id å’Œ physical idï¼Œåˆ™è¯´æ˜ç³»ç»Ÿæ”¯æŒè¶…çº¿ç¨‹ï¼ˆHTï¼‰æŠ€æœ¯&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¤‡æ³¨ä¸€ä¸‹ï¼šLinuxä¸‹topæŸ¥çœ‹çš„CPUä¹Ÿæ˜¯é€»è¾‘CPUä¸ªæ•°&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat /proc/cpuinfo| grep &lt;span class=&quot;string&quot;&gt;&quot;processor&quot;&lt;/span&gt; |wc -l&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32ï¼ˆæ”¯æŒè¶…çº¿ç¨‹ï¼‰&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://kunxiang.wang/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://kunxiang.wang/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>LinuxæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</title>
    <link href="http://kunxiang.wang/2019/05/28/Linux%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8%E6%83%85%E5%86%B5/"/>
    <id>http://kunxiang.wang/2019/05/28/LinuxæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ/</id>
    <published>2019-05-28T02:11:18.000Z</published>
    <updated>2019-05-28T05:53:41.246Z</updated>
    
    <content type="html"><![CDATA[<h3 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h3><ul><li><p>lsof -i ç”¨ä»¥æ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„è¿›ç¨‹æƒ…å†µï¼Œlsof(list open files)æ˜¯ä¸€ä¸ªåˆ—å‡ºå½“å‰ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶çš„å·¥å…·ã€‚ä»¥rootç”¨æˆ·æ¥æ‰§è¡Œlsof -iå‘½ä»¤</p></li><li><p>lsof -i:ç«¯å£å·ï¼Œç”¨äºæŸ¥çœ‹æŸä¸€ç«¯å£çš„å ç”¨æƒ…å†µï¼Œæ¯”å¦‚æŸ¥çœ‹22å·ç«¯å£ä½¿ç”¨æƒ…å†µï¼Œlsof -i:22</p></li></ul><p><img src="https://upload-images.jianshu.io/upload_images/2952111-34cfaa89c8a414a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2019-05-28 at 13.50.08.png"></p><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p>netstat -tunlpç”¨äºæ˜¾ç¤ºtcpï¼Œudpçš„ç«¯å£å’Œè¿›ç¨‹ç­‰ç›¸å…³æƒ…å†µ</p><p><img src="https://upload-images.jianshu.io/upload_images/2952111-79a5c99ebc5ba5c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2019-05-28 at 13.51.26.png"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;lsof&quot;&gt;&lt;a href=&quot;#lsof&quot; class=&quot;headerlink&quot; title=&quot;lsof&quot;&gt;&lt;/a&gt;lsof&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;lsof -i ç”¨ä»¥æ˜¾ç¤ºç¬¦åˆæ¡ä»¶çš„è¿›ç¨‹æƒ…å†µï¼Œlsof(list open files)æ˜¯ä¸€ä¸ªåˆ—å‡ºå½“å‰ç³»ç»Ÿæ‰“
      
    
    </summary>
    
      <category term="Linux/Mac OS" scheme="http://kunxiang.wang/categories/Linux-Mac-OS/"/>
    
    
      <category term="Linux/Mac OS" scheme="http://kunxiang.wang/tags/Linux-Mac-OS/"/>
    
  </entry>
  
  <entry>
    <title>Javaå®æ—¶è¯»å–logæ—¥å¿—æ–‡ä»¶ç¤ºä¾‹ä»£ç </title>
    <link href="http://kunxiang.wang/2019/05/21/Java%E5%AE%9E%E6%97%B6%E8%AF%BB%E5%8F%96log%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/"/>
    <id>http://kunxiang.wang/2019/05/21/Javaå®æ—¶è¯»å–logæ—¥å¿—æ–‡ä»¶ç¤ºä¾‹ä»£ç /</id>
    <published>2019-05-21T06:28:14.000Z</published>
    <updated>2019-11-26T02:01:26.640Z</updated>
    
    <content type="html"><![CDATA[<p><code>éœ€æ±‚</code>ï¼šæ­£åœ¨å¼€å‘ä¸€ä¸ªç›‘æ§ç³»ç»Ÿï¼Œè¦æ±‚å°†å¤šå°æ—¥å¿—ä¿¡æ¯å®æ—¶é‡‡é›†å‡ºæ¥ï¼Œç„¶åä¿å­˜åˆ°Kafkaä¸­ï¼ŒåæœŸå¯¹æ—¥å¿—æ•°æ®è¿›è¡Œsparkè¿ç®—ã€å¤§æ•°æ®å¤„ç†åˆ†æï¼Œæ—¥å¿—æŒ‰å¤§å°ï¼Œæ—¶é—´åˆ‡åˆ†ã€‚</p><p><code>è¿ç”¨çš„æŠ€æœ¯</code>ï¼šRandomAccessFileç±»ä¸­seekæ–¹æ³•å¯ä»¥ä»æŒ‡å®šä½ç½®è¯»å–æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥å®ç°æ–‡ä»¶å®æ—¶è¯»å–ï¼ŒJDKæ–‡æ¡£æœ‰å¯¹RandomAccessFileçš„ä»‹ç»ã€‚</p><p><code>æ€æƒ³</code>ï¼šåœ¨æ¯ä¸€æ¬¡è¯»å–åï¼Œcloseä¸€ä¸‹å°±ä¸ä¼šå½±å“é‡å‘½åæ“ä½œäº†ã€‚å› ä¸ºæ—¥å¿—æ˜¯çº¿ä¸Šæœºå™¨äº§ç”Ÿçš„ï¼Œæˆ‘ä»¬åªéœ€è¦å†™å®æ—¶è¯»å–çš„æ–¹æ³•å³å¯ï¼Œä½†æ˜¯è¿™é‡Œä¸ºäº†æ¨¡æ‹Ÿå®é™…æƒ…å†µï¼Œä¹ŸæŠŠäº§ç”Ÿæ—¥å¿—çš„æ–¹æ³•å‡ºæ¥ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥æ‰‹åŠ¨æ”¹å˜æ—¥å¿—çš„åç§°ï¼Œæ›´ä¸ºæ–¹ä¾¿çš„å¤„ç†æ–¹å¼â€”â€“å°†æ—¥å¿—mock.logç›´æ¥åˆ é™¤å³å¯ã€‚</p><p><code>åŸç”ŸRandomAccessFileæ•ˆç‡è¾ƒä½ï¼Œåé¢é™„æœ‰BufferedRandomAccessFile</code></p><p>æ¨¡æ‹Ÿå†™æ—¥å¿—çš„ç±»<br>å› ä¸ºæ—¥å¿—æ˜¯æŒ‰å¤§å°å’Œæ—¶é—´åˆ‡åˆ†çš„ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œç›´æ¥ä¿®æ”¹æ—¥å¿—çš„åç§°ï¼Œæˆ–è€…åˆ é™¤æ—¥å¿—ã€‚<br><a id="more"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.inveno.file;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogSvr</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(LogSvr.class);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> SimpleDateFormat  dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ScheduledExecutorService exec = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logMsg</span><span class="params">(File logFile,String msgInfo)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!logFile.exists()) &#123;</span><br><span class="line">logFile.createNewFile();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Writer txtWriter = <span class="keyword">new</span> FileWriter(logFile,<span class="keyword">true</span>);</span><br><span class="line">txtWriter.write(dateFormat.format(<span class="keyword">new</span> Date()) + <span class="string">"\t"</span> + msgInfo + <span class="string">"\n"</span>);</span><br><span class="line">txtWriter.flush();</span><br><span class="line">txtWriter.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(exec != <span class="keyword">null</span>)&#123;</span><br><span class="line">exec.shutdown();</span><br><span class="line">logger.info(<span class="string">"file write stop ï¼"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> LogSvr logSvr = <span class="keyword">new</span> LogSvr();</span><br><span class="line"><span class="keyword">final</span> File tmpLogFile = <span class="keyword">new</span> File(<span class="string">"pathtolog.log"</span>);</span><br><span class="line"><span class="keyword">final</span> String msgInfo = <span class="string">"test !"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¯5ç§’å‘æ—¥å¿—æ–‡ä»¶å†™ä¸€æ¬¡æ•°æ®</span></span><br><span class="line">exec.scheduleWithFixedDelay(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">logSvr.logMsg(tmpLogFile, msgInfo);</span><br><span class="line"><span class="comment">//Thread.sleep(1000);</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">logger.error(<span class="string">"file write error ï¼"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;, <span class="number">0</span>, <span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ScheduledExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = Logger.getLogger(Start.class.getName());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> pointer = <span class="number">0</span>; <span class="comment">// æ–‡ä»¶æŒ‡é’ˆä½ç½®</span></span><br><span class="line">    <span class="keyword">private</span> SimpleDateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ScheduledExecutorService exec = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">realtimeShowLog</span><span class="params">(<span class="keyword">final</span> File logFile)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (logFile == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"logFile can not be null"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¯2ç§’è¯»å–æ–°å¢çš„æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line">        exec.scheduleWithFixedDelay(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//è·å¾—å˜åŒ–éƒ¨åˆ†</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">long</span> len = logFile.length();</span><br><span class="line">                    <span class="keyword">if</span> (len &lt; pointer) &#123;</span><br><span class="line">                        logger.info(<span class="string">"Log file was reset. Restarting logging from start of file."</span>);</span><br><span class="line">                        pointer = <span class="number">0</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//æŒ‡å®šæ–‡ä»¶å¯è¯»å¯å†™</span></span><br><span class="line">                        RandomAccessFile randomFile = <span class="keyword">new</span> RandomAccessFile(logFile, <span class="string">"rw"</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="comment">//è·å–RandomAccessFileå¯¹è±¡æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆå§‹ä½ç½®æ˜¯0</span></span><br><span class="line">                        logger.info(<span class="string">"RandomAccessFileæ–‡ä»¶æŒ‡é’ˆçš„åˆå§‹ä½ç½®:"</span> + pointer);</span><br><span class="line"></span><br><span class="line">                        randomFile.seek(pointer);<span class="comment">//ç§»åŠ¨åˆ°æ–‡ä»¶æŒ‡é’ˆä½ç½®</span></span><br><span class="line"></span><br><span class="line">                        String tmp;</span><br><span class="line">                        <span class="keyword">while</span> ((tmp = randomFile.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            System.out.println(<span class="string">"info : "</span> + <span class="keyword">new</span> String(tmp.getBytes(<span class="string">"utf-8"</span>)));</span><br><span class="line">                            pointer = randomFile.getFilePointer();</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        randomFile.close();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="comment">//å®æ—¶è¯»å–æ—¥å¿—å¼‚å¸¸ï¼Œéœ€è¦è®°å½•æ—¶é—´å’ŒlastTimeFileSize ä»¥ä¾¿åæœŸæ‰‹åŠ¨è¡¥å……</span></span><br><span class="line">                    logger.error(dateFormat.format(<span class="keyword">new</span> Date()) + <span class="string">" File read error, pointer: "</span> + pointer);</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="comment">//å°†pointer è½åœ°ä»¥ä¾¿ä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œç›´æ¥ä»æŒ‡å®šä½ç½®è·å–</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;, <span class="number">0</span>, <span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (exec != <span class="keyword">null</span>) &#123;</span><br><span class="line">            exec.shutdown();</span><br><span class="line">            logger.info(<span class="string">"file read stop ï¼"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        LogView view = <span class="keyword">new</span> LogView();</span><br><span class="line">        File tmpLogFile = <span class="keyword">new</span> File(<span class="string">"pathtolog.log"</span>);</span><br><span class="line">        System.out.println(tmpLogFile.getAbsolutePath());</span><br><span class="line">        view.pointer = <span class="number">0</span>;</span><br><span class="line">        view.realtimeShowLog(tmpLogFile);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment"> * or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment"> * distributed with this work for additional information</span></span><br><span class="line"><span class="comment"> * regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment"> * to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment"> * "License"); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment"> * with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A &lt;code&gt;BufferedRandomAccessFile&lt;/code&gt; is like a</span></span><br><span class="line"><span class="comment"> * &lt;code&gt;RandomAccessFile&lt;/code&gt;, but it uses a private buffer so that most</span></span><br><span class="line"><span class="comment"> * operations do not require a disk access.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Note: The operations on this class are unmonitored. Also, the correct</span></span><br><span class="line"><span class="comment"> * functioning of the &lt;code&gt;RandomAccessFile&lt;/code&gt; methods that are not</span></span><br><span class="line"><span class="comment"> * overridden here relies on the implementation of those methods in the</span></span><br><span class="line"><span class="comment"> * superclass.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * To describe the above fields, we introduce the following abstractions for</span></span><br><span class="line"><span class="comment"> * the file "f":</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * len(f) the length of the file curr(f) the current position in the file</span></span><br><span class="line"><span class="comment"> * c(f) the abstract contents of the file disk(f) the contents of f's</span></span><br><span class="line"><span class="comment"> * backing disk file closed(f) true iff the file is closed</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * "curr(f)" is an index in the closed interval [0, len(f)]. "c(f)" is a</span></span><br><span class="line"><span class="comment"> * character sequence of length "len(f)". "c(f)" and "disk(f)" may differ if</span></span><br><span class="line"><span class="comment"> * "c(f)" contains unflushed writes not reflected in "disk(f)". The flush</span></span><br><span class="line"><span class="comment"> * operation has the effect of making "disk(f)" identical to "c(f)".</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * A file is said to be *valid* if the following conditions hold:</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * V1. The "closed" and "curr" fields are correct:</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * f.closed == closed(f) f.curr == curr(f)</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * V2. The current position is either contained in the buffer, or just past</span></span><br><span class="line"><span class="comment"> * the buffer:</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * f.lo &lt;= f.curr &lt;= f.hi</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * V3. Any (possibly) un-flushed characters are stored in "f.buff":</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * (forall i in [f.lo, f.curr): c(f)[i] == f.buff[i - f.lo])</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * V4. For all characters not covered by V3, c(f) and disk(f) agree:</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * (forall i in [f.lo, len(f)): i not in [f.lo, f.curr) =&gt; c(f)[i] ==</span></span><br><span class="line"><span class="comment"> * disk(f)[i])</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * V5. "f.dirty" is true iff the buffer contains bytes that should be</span></span><br><span class="line"><span class="comment"> * flushed to the file; by V3 and V4, only part of the buffer can be dirty.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * f.dirty == (exists i in [f.lo, f.curr): c(f)[i] != f.buff[i - f.lo])</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * V6. this.maxHi == this.lo + this.buff.length</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Note that "f.buff" can be "null" in a valid file, since the range of</span></span><br><span class="line"><span class="comment"> * characters in V3 is empty when "f.lo == f.curr".</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * A file is said to be *ready* if the buffer contains the current position,</span></span><br><span class="line"><span class="comment"> * i.e., when:</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * R1. !f.closed &amp;&amp; f.buff != null &amp;&amp; f.lo &lt;= f.curr &amp;&amp; f.curr &lt; f.hi</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * When a file is ready, reading or writing a single byte can be performed</span></span><br><span class="line"><span class="comment"> * by reading or writing the in-memory buffer without performing a disk</span></span><br><span class="line"><span class="comment"> * operation.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * !!!This class come from network ,I just adjust code style!!!</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhaofeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018 -05-02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedRandomAccessFile</span> <span class="keyword">extends</span> <span class="title">RandomAccessFile</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 64K buffer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOG_BUFF_SZ = <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BUFF_SZ = (<span class="number">1</span> &lt;&lt; LOG_BUFF_SZ);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> BUFF_MASK = ~(((<span class="keyword">long</span>) BUFF_SZ) - <span class="number">1L</span>);</span><br><span class="line">    <span class="keyword">private</span> String path_;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This implementation is based on the buffer implementation in Modula-3's</span></span><br><span class="line"><span class="comment">     * "Rd", "Wr", "RdClass", and "WrClass" interfaces.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * true iff un-flushed bytes exist</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> dirty_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * dirty_ can be cleared by e.g. seek, so track sync separately</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> syncNeeded_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * current position in file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> curr_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * bounds on characters in "buff"</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> lo_, hi_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * local buffer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] buff_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * this.lo + this.buff.length</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> maxHi_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * buffer contains last file block?</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> hitEOF_;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * disk position</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> diskPos_;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Open a new &lt;code&gt;BufferedRandomAccessFile&lt;/code&gt; on &lt;code&gt;file&lt;/code&gt;</span></span><br><span class="line"><span class="comment">     * in mode &lt;code&gt;mode&lt;/code&gt;, which should be "r" for reading only, or</span></span><br><span class="line"><span class="comment">     * "rw" for reading and writing.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file the file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mode the mode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException the io exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BufferedRandomAccessFile</span><span class="params">(File file, String mode)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(file, mode, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Instantiates a new Buffered random access file.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file the file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mode the mode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size the size</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException the io exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BufferedRandomAccessFile</span><span class="params">(File file, String mode, <span class="keyword">int</span> size)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(file, mode);</span><br><span class="line">        path_ = file.getAbsolutePath();</span><br><span class="line">        <span class="keyword">this</span>.init(size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Open a new &lt;code&gt;BufferedRandomAccessFile&lt;/code&gt; on the file named</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;name&lt;/code&gt; in mode &lt;code&gt;mode&lt;/code&gt;, which should be "r" for</span></span><br><span class="line"><span class="comment">     * reading only, or "rw" for reading and writing.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name the name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mode the mode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException the io exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BufferedRandomAccessFile</span><span class="params">(String name, String mode)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(name, mode, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Instantiates a new Buffered random access file.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name the name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mode the mode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size the size</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> FileNotFoundException the file not found exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BufferedRandomAccessFile</span><span class="params">(String name, String mode, <span class="keyword">int</span> size)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, mode);</span><br><span class="line">        path_ = name;</span><br><span class="line">        <span class="keyword">this</span>.init(size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dirty_ = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.lo_ = <span class="keyword">this</span>.curr_ = <span class="keyword">this</span>.hi_ = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.buff_ = (size &gt; BUFF_SZ) ? <span class="keyword">new</span> <span class="keyword">byte</span>[size] : <span class="keyword">new</span> <span class="keyword">byte</span>[BUFF_SZ];</span><br><span class="line">        <span class="keyword">this</span>.maxHi_ = (<span class="keyword">long</span>) BUFF_SZ;</span><br><span class="line">        <span class="keyword">this</span>.hitEOF_ = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.diskPos_ = <span class="number">0L</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Gets path.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the path</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> path_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sync.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException the io exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sync</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (syncNeeded_) &#123;</span><br><span class="line">            flush();</span><br><span class="line">            getChannel().force(<span class="keyword">true</span>);</span><br><span class="line">            syncNeeded_ = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flush();</span><br><span class="line">        <span class="keyword">this</span>.buff_ = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">super</span>.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Flush any bytes in the file's buffer that have not yet been written to</span></span><br><span class="line"><span class="comment">     * disk. If the file was created read-only, this method is a no-op.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException the io exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flush</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flushBuffer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Flush any dirty bytes in the buffer to disk.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">flushBuffer</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.dirty_) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.diskPos_ != <span class="keyword">this</span>.lo_) &#123;</span><br><span class="line">                <span class="keyword">super</span>.seek(<span class="keyword">this</span>.lo_);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> len = (<span class="keyword">int</span>) (<span class="keyword">this</span>.curr_ - <span class="keyword">this</span>.lo_);</span><br><span class="line">            <span class="keyword">super</span>.write(<span class="keyword">this</span>.buff_, <span class="number">0</span>, len);</span><br><span class="line">            <span class="keyword">this</span>.diskPos_ = <span class="keyword">this</span>.curr_;</span><br><span class="line">            <span class="keyword">this</span>.dirty_ = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Read at most "this.buff.length" bytes into "this.buff", returning the</span></span><br><span class="line"><span class="comment">     * number of bytes read. If the return result is less than</span></span><br><span class="line"><span class="comment">     * "this.buff.length", then EOF was read.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">fillBuffer</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> rem = <span class="keyword">this</span>.buff_.length;</span><br><span class="line">        <span class="keyword">while</span> (rem &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> n = <span class="keyword">super</span>.read(<span class="keyword">this</span>.buff_, cnt, rem);</span><br><span class="line">            <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt += n;</span><br><span class="line">            rem -= n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((cnt &lt; <span class="number">0</span>) &amp;&amp; (<span class="keyword">this</span>.hitEOF_ = (cnt &lt; <span class="keyword">this</span>.buff_.length))) &#123;</span><br><span class="line">            <span class="comment">// make sure buffer that wasn't read is initialized with -1</span></span><br><span class="line">            Arrays.fill(<span class="keyword">this</span>.buff_, cnt, <span class="keyword">this</span>.buff_.length, (<span class="keyword">byte</span>) <span class="number">0xff</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.diskPos_ += cnt;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method positions &lt;code&gt;this.curr&lt;/code&gt; at position &lt;code&gt;pos&lt;/code&gt;.</span></span><br><span class="line"><span class="comment">     * If &lt;code&gt;pos&lt;/code&gt; does not fall in the current buffer, it flushes the</span></span><br><span class="line"><span class="comment">     * current buffer and loads the correct one.&lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * On exit from this routine &lt;code&gt;this.curr == this.hi&lt;/code&gt; iff &lt;code&gt;pos&lt;/code&gt;</span></span><br><span class="line"><span class="comment">     * is at or past the end-of-file, which can only happen if the file was</span></span><br><span class="line"><span class="comment">     * opened in read-only mode.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">seek</span><span class="params">(<span class="keyword">long</span> pos)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pos &gt;= <span class="keyword">this</span>.hi_ || pos &lt; <span class="keyword">this</span>.lo_) &#123;</span><br><span class="line">            <span class="comment">// seeking outside of current buffer -- flush and read</span></span><br><span class="line">            <span class="keyword">this</span>.flushBuffer();</span><br><span class="line">            <span class="keyword">this</span>.lo_ = pos &amp; BUFF_MASK; <span class="comment">// start at BuffSz boundary</span></span><br><span class="line">            <span class="keyword">this</span>.maxHi_ = <span class="keyword">this</span>.lo_ + (<span class="keyword">long</span>) <span class="keyword">this</span>.buff_.length;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.diskPos_ != <span class="keyword">this</span>.lo_) &#123;</span><br><span class="line">                <span class="keyword">super</span>.seek(<span class="keyword">this</span>.lo_);</span><br><span class="line">                <span class="keyword">this</span>.diskPos_ = <span class="keyword">this</span>.lo_;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> n = <span class="keyword">this</span>.fillBuffer();</span><br><span class="line">            <span class="keyword">this</span>.hi_ = <span class="keyword">this</span>.lo_ + (<span class="keyword">long</span>) n;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// seeking inside current buffer -- no read required</span></span><br><span class="line">            <span class="keyword">if</span> (pos &lt; <span class="keyword">this</span>.curr_) &#123;</span><br><span class="line">                <span class="comment">// if seeking backwards, we must flush to maintain V4</span></span><br><span class="line">                <span class="keyword">this</span>.flushBuffer();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.curr_ = pos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getFilePointer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.curr_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * max accounts for the case where we have written past the old file length, but not yet flushed our buffer</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">length</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(<span class="keyword">this</span>.curr_, <span class="keyword">super</span>.length());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (readEnd()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">byte</span> res = <span class="keyword">this</span>.buff_[(<span class="keyword">int</span>) (<span class="keyword">this</span>.curr_ - <span class="keyword">this</span>.lo_)];</span><br><span class="line">        <span class="keyword">this</span>.curr_++;</span><br><span class="line">        <span class="keyword">return</span> ((<span class="keyword">int</span>) res) &amp; <span class="number">0xFF</span>; <span class="comment">// convert byte -&gt; int</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span>[] b)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.read(b, <span class="number">0</span>, b.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (readEnd()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        len = Math.min(len, (<span class="keyword">int</span>) (<span class="keyword">this</span>.hi_ - <span class="keyword">this</span>.curr_));</span><br><span class="line">        <span class="keyword">int</span> buffOff = (<span class="keyword">int</span>) (<span class="keyword">this</span>.curr_ - <span class="keyword">this</span>.lo_);</span><br><span class="line">        System.arraycopy(<span class="keyword">this</span>.buff_, buffOff, b, off, len);</span><br><span class="line">        <span class="keyword">this</span>.curr_ += len;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">readEnd</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.curr_ &gt;= <span class="keyword">this</span>.hi_) &#123;</span><br><span class="line">            <span class="comment">// test for EOF</span></span><br><span class="line">            <span class="comment">// if (this.hi &lt; this.maxHi) return -1;</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.hitEOF_) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// slow path -- read another buffer</span></span><br><span class="line">            <span class="keyword">this</span>.seek(<span class="keyword">this</span>.curr_);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.curr_ == <span class="keyword">this</span>.hi_) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> b)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.curr_ &gt;= <span class="keyword">this</span>.hi_) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.hitEOF_ &amp;&amp; <span class="keyword">this</span>.hi_ &lt; <span class="keyword">this</span>.maxHi_) &#123;</span><br><span class="line">                <span class="comment">// at EOF -- bump "hi"</span></span><br><span class="line">                <span class="keyword">this</span>.hi_++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// slow path -- write current buffer; read next one</span></span><br><span class="line">                <span class="keyword">this</span>.seek(<span class="keyword">this</span>.curr_);</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.curr_ == <span class="keyword">this</span>.hi_) &#123;</span><br><span class="line">                    <span class="comment">// appending to EOF -- bump "hi"</span></span><br><span class="line">                    <span class="keyword">this</span>.hi_++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.buff_[(<span class="keyword">int</span>) (<span class="keyword">this</span>.curr_ - <span class="keyword">this</span>.lo_)] = (<span class="keyword">byte</span>) b;</span><br><span class="line">        <span class="keyword">this</span>.curr_++;</span><br><span class="line">        <span class="keyword">this</span>.dirty_ = <span class="keyword">true</span>;</span><br><span class="line">        syncNeeded_ = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span>[] b)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.write(b, <span class="number">0</span>, b.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> n = <span class="keyword">this</span>.writeAtMost(b, off, len);</span><br><span class="line">            off += n;</span><br><span class="line">            len -= n;</span><br><span class="line">            <span class="keyword">this</span>.dirty_ = <span class="keyword">true</span>;</span><br><span class="line">            syncNeeded_ = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Write at most "len" bytes to "b" starting at position "off", and return</span></span><br><span class="line"><span class="comment">     * the number of bytes written.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">writeAtMost</span><span class="params">(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.curr_ &gt;= <span class="keyword">this</span>.hi_) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.hitEOF_ &amp;&amp; <span class="keyword">this</span>.hi_ &lt; <span class="keyword">this</span>.maxHi_) &#123;</span><br><span class="line">                <span class="comment">// at EOF -- bump "hi"</span></span><br><span class="line">                <span class="keyword">this</span>.hi_ = <span class="keyword">this</span>.maxHi_;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// slow path -- write current buffer; read next one</span></span><br><span class="line">                <span class="keyword">this</span>.seek(<span class="keyword">this</span>.curr_);</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.curr_ == <span class="keyword">this</span>.hi_) &#123;</span><br><span class="line">                    <span class="comment">// appending to EOF -- bump "hi"</span></span><br><span class="line">                    <span class="keyword">this</span>.hi_ = <span class="keyword">this</span>.maxHi_;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        len = Math.min(len, (<span class="keyword">int</span>) (<span class="keyword">this</span>.hi_ - <span class="keyword">this</span>.curr_));</span><br><span class="line">        <span class="keyword">int</span> buffOff = (<span class="keyword">int</span>) (<span class="keyword">this</span>.curr_ - <span class="keyword">this</span>.lo_);</span><br><span class="line">        System.arraycopy(b, off, <span class="keyword">this</span>.buff_, buffOff, len);</span><br><span class="line">        <span class="keyword">this</span>.curr_ += len;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;éœ€æ±‚&lt;/code&gt;ï¼šæ­£åœ¨å¼€å‘ä¸€ä¸ªç›‘æ§ç³»ç»Ÿï¼Œè¦æ±‚å°†å¤šå°æ—¥å¿—ä¿¡æ¯å®æ—¶é‡‡é›†å‡ºæ¥ï¼Œç„¶åä¿å­˜åˆ°Kafkaä¸­ï¼ŒåæœŸå¯¹æ—¥å¿—æ•°æ®è¿›è¡Œsparkè¿ç®—ã€å¤§æ•°æ®å¤„ç†åˆ†æï¼Œæ—¥å¿—æŒ‰å¤§å°ï¼Œæ—¶é—´åˆ‡åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;è¿ç”¨çš„æŠ€æœ¯&lt;/code&gt;ï¼šRandomAccessFileç±»ä¸­seekæ–¹æ³•å¯ä»¥ä»æŒ‡å®šä½ç½®è¯»å–æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥å®ç°æ–‡ä»¶å®æ—¶è¯»å–ï¼ŒJDKæ–‡æ¡£æœ‰å¯¹RandomAccessFileçš„ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;æ€æƒ³&lt;/code&gt;ï¼šåœ¨æ¯ä¸€æ¬¡è¯»å–åï¼Œcloseä¸€ä¸‹å°±ä¸ä¼šå½±å“é‡å‘½åæ“ä½œäº†ã€‚å› ä¸ºæ—¥å¿—æ˜¯çº¿ä¸Šæœºå™¨äº§ç”Ÿçš„ï¼Œæˆ‘ä»¬åªéœ€è¦å†™å®æ—¶è¯»å–çš„æ–¹æ³•å³å¯ï¼Œä½†æ˜¯è¿™é‡Œä¸ºäº†æ¨¡æ‹Ÿå®é™…æƒ…å†µï¼Œä¹ŸæŠŠäº§ç”Ÿæ—¥å¿—çš„æ–¹æ³•å‡ºæ¥ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥æ‰‹åŠ¨æ”¹å˜æ—¥å¿—çš„åç§°ï¼Œæ›´ä¸ºæ–¹ä¾¿çš„å¤„ç†æ–¹å¼â€”â€“å°†æ—¥å¿—mock.logç›´æ¥åˆ é™¤å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;åŸç”ŸRandomAccessFileæ•ˆç‡è¾ƒä½ï¼Œåé¢é™„æœ‰BufferedRandomAccessFile&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ¨¡æ‹Ÿå†™æ—¥å¿—çš„ç±»&lt;br&gt;å› ä¸ºæ—¥å¿—æ˜¯æŒ‰å¤§å°å’Œæ—¶é—´åˆ‡åˆ†çš„ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œç›´æ¥ä¿®æ”¹æ—¥å¿—çš„åç§°ï¼Œæˆ–è€…åˆ é™¤æ—¥å¿—ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://kunxiang.wang/categories/Java/"/>
    
    
      <category term="Java" scheme="http://kunxiang.wang/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Javaå¤šçº¿ç¨‹è¯»å†™HashMapé‡åˆ°çš„å‘</title>
    <link href="http://kunxiang.wang/2019/03/29/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%AF%BB%E5%86%99HashMap%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
    <id>http://kunxiang.wang/2019/03/29/Javaå¤šçº¿ç¨‹è¯»å†™HashMapé‡åˆ°çš„å‘/</id>
    <published>2019-03-29T06:55:09.000Z</published>
    <updated>2019-03-29T06:55:09.897Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Pythonä¸­å¦‚ä½•è¡¨ç¤ºæ­£è´Ÿæ— ç©·å¤§</title>
    <link href="http://kunxiang.wang/2019/03/15/Python%E4%B8%AD%E5%A6%82%E4%BD%95%E8%A1%A8%E7%A4%BA%E6%AD%A3%E8%B4%9F%E6%97%A0%E7%A9%B7%E5%A4%A7/"/>
    <id>http://kunxiang.wang/2019/03/15/Pythonä¸­å¦‚ä½•è¡¨ç¤ºæ­£è´Ÿæ— ç©·å¤§/</id>
    <published>2019-03-15T08:12:43.000Z</published>
    <updated>2019-03-15T08:17:59.432Z</updated>
    
    <content type="html"><![CDATA[<h4 id="cmath-inf"><a href="#cmath-inf" class="headerlink" title="cmath.inf"></a>cmath.inf</h4><p>Floating-point positive infinity. Equivalent to <code>float(&#39;inf&#39;)</code>.<br>è´Ÿæ— ç©·-float(â€˜-infâ€™)</p><p>New in version 3.6.</p><a id="more"></a><h4 id="cmath-pi"><a href="#cmath-pi" class="headerlink" title="cmath.pi"></a>cmath.pi</h4><p>The mathematical constant Ï€, as a float.</p><h4 id="cmath-e"><a href="#cmath-e" class="headerlink" title="cmath.e"></a>cmath.e</h4><p>The mathematical constant e, as a float.</p><h4 id="cmath-tau"><a href="#cmath-tau" class="headerlink" title="cmath.tau"></a>cmath.tau</h4><p>The mathematical constant Ï„, as a float.</p><p>New in version 3.6.</p><h4 id="cmath-infj"><a href="#cmath-infj" class="headerlink" title="cmath.infj"></a>cmath.infj</h4><p>Complex number with zero real part and positive infinity imaginary part. Equivalent to <code>complex(0.0, float(&#39;inf&#39;))</code>.</p><p>New in version 3.6.</p><h4 id="cmath-nan"><a href="#cmath-nan" class="headerlink" title="cmath.nan"></a>cmath.nan</h4><p>A floating-point â€œnot a numberâ€ (NaN) value. Equivalent to <code>float(&#39;nan&#39;)</code>.</p><p>New in version 3.6.</p><h4 id="cmath-nanj"><a href="#cmath-nanj" class="headerlink" title="cmath.nanj"></a>cmath.nanj</h4><p>Complex number with zero real part and NaN imaginary part. Equivalent to complex(0.0, float(â€˜nanâ€™)).</p><p>New in version 3.6.</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;cmath-inf&quot;&gt;&lt;a href=&quot;#cmath-inf&quot; class=&quot;headerlink&quot; title=&quot;cmath.inf&quot;&gt;&lt;/a&gt;cmath.inf&lt;/h4&gt;&lt;p&gt;Floating-point positive infinity. Equivalent to &lt;code&gt;float(&amp;#39;inf&amp;#39;)&lt;/code&gt;.&lt;br&gt;è´Ÿæ— ç©·-float(â€˜-infâ€™)&lt;/p&gt;
&lt;p&gt;New in version 3.6.&lt;/p&gt;
    
    </summary>
    
      <category term="Python3 è¿›é˜¶" scheme="http://kunxiang.wang/categories/Python3-%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="Python3" scheme="http://kunxiang.wang/tags/Python3/"/>
    
  </entry>
  
  <entry>
    <title>è¿›ç¨‹åœ°å€ç©ºé—´</title>
    <link href="http://kunxiang.wang/2019/02/21/%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/"/>
    <id>http://kunxiang.wang/2019/02/21/è¿›ç¨‹åœ°å€ç©ºé—´/</id>
    <published>2019-02-21T13:32:36.000Z</published>
    <updated>2019-02-21T13:33:14.795Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://upload-images.jianshu.io/upload_images/2952111-0eb79a7aa48b7b29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="process address space.png"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2952111-0eb79a7aa48b7b29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;
      
    
    </summary>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://kunxiang.wang/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="å¤šä»»åŠ¡å¤„ç†" scheme="http://kunxiang.wang/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86/"/>
    
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://kunxiang.wang/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>å¼‚å¸¸çš„åˆ†ç±»</title>
    <link href="http://kunxiang.wang/2019/02/20/%E5%BC%82%E5%B8%B8%E7%9A%84%E5%88%86%E7%B1%BB/"/>
    <id>http://kunxiang.wang/2019/02/20/å¼‚å¸¸çš„åˆ†ç±»/</id>
    <published>2019-02-20T07:24:54.000Z</published>
    <updated>2019-02-20T08:03:36.280Z</updated>
    
    <content type="html"><![CDATA[<p>å¼‚å¸¸å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š<code>ä¸­æ–­(interrupt)ã€é™·é˜±(trap)ã€æ•…éšœ(fault)ã€ç»ˆæ­¢(abort)</code>.</p><table><thead><tr><th>ç±»åˆ«</th><th>åŸå› </th><th>å¼‚æ­¥/åŒæ­¥</th><th>è¿”å›è¡Œä¸º</th></tr></thead><tbody><tr><td>ä¸­æ–­</td><td>æ¥è‡ªI/Oè®¾å¤‡çš„ä¿¡å·</td><td>å¼‚æ­¥</td><td>æ€»æ˜¯è¿”å›ä¸‹ä¸€æ¡æŒ‡ä»¤</td></tr><tr><td>é™·é˜±</td><td>æœ‰æ„çš„å¼‚å¸¸</td><td>åŒæ­¥</td><td>æ€»æ˜¯è¿”å›ä¸‹ä¸€æ¡æŒ‡ä»¤</td></tr><tr><td>æ•…éšœ</td><td>æ½œåœ¨å¯æ¢å¤çš„é”™è¯¯</td><td>åŒæ­¥</td><td>å¯èƒ½è¿”å›åˆ°å½“å‰æŒ‡ä»¤</td></tr><tr><td>ç»ˆæ­¢</td><td>ä¸å¯æ¢å¤çš„é”™è¯¯</td><td>åŒæ­¥</td><td>ä¸ä¼šè¿”å›</td></tr></tbody></table><p>å¼‚æ­¥å¼‚å¸¸æ—¶ç”±å¤„ç†å™¨å¤–éƒ¨çš„I/Oè®¾å¤‡ä¸­çš„äº‹ä»¶äº§ç”Ÿçš„ã€‚åŒæ­¥å¼‚å¸¸æ˜¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„ç›´æ¥äº§ç‰©ã€‚</p><a id="more"></a><h2 id="ä¸­æ–­"><a href="#ä¸­æ–­" class="headerlink" title="ä¸­æ–­"></a>ä¸­æ–­</h2><p>ä¸­æ–­æ—¶å¼‚æ­¥å‘ç”Ÿçš„ï¼Œæ¥è‡ªå¤„ç†å™¨å¤–éƒ¨çš„I/Oè®¾å¤‡çš„ä¿¡å·ç»“æœã€‚å‰©ä¸‹çš„å¼‚å¸¸ç±»å‹æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼Œæ˜¯æ‰§è¡Œå½“å‰æŒ‡ä»¤çš„ç»“æœï¼Œæˆ‘ä»¬æŠŠè¿™ç±»æŒ‡ä»¤å«åšæ•…éšœæŒ‡ä»¤ã€‚</p><h2 id="é™·é˜±"><a href="#é™·é˜±" class="headerlink" title="é™·é˜±"></a>é™·é˜±</h2><p><code>é™·é˜±</code>æœ€é‡è¦çš„ç”¨é€”æ˜¯ç”¨åœ¨ç”¨æˆ·ç¨‹åºå’Œå†…æ ¸ä¹‹é—´æä¾›ä¸€ä¸ªåƒè¿‡ç¨‹ä¸€æ ·çš„æ¥å£ï¼Œå«åš<code>ç³»ç»Ÿè°ƒç”¨</code><br>ä»ç¨‹åºå‘˜çš„è§’åº¦çœ‹ï¼Œç³»ç»Ÿè°ƒç”¨å’Œæ™®é€šçš„å‡½æ•°è°ƒç”¨æ˜¯ä¸€æ ·çš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬çš„å®ç°éå¸¸ä¸åŒã€‚æ™®é€šå‡½æ•°è¿è¡Œåœ¨<code>ç”¨æˆ·æ¨¡å¼</code>ä¸­ï¼Œç”¨æˆ·æ¨¡å¼é™åˆ¶äº†å‡½æ•°å¯ä»¥æ‰§è¡Œçš„æŒ‡ä»¤çš„ç±»å‹ï¼Œè€Œä¸”å®ƒä»¬åªèƒ½è®¿é—®ä¸è°ƒç”¨å‡½æ•°ç›¸åŒçš„æ ˆã€‚ç³»ç»Ÿè°ƒç”¨åœ¨<code>å†…æ ¸æ¨¡å¼</code>ä¸­ï¼Œå†…æ ¸æ¨¡å¼å…è®¸ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼Œå¹¶è®¿é—®å®šä¹‰åœ¨å†…æ ¸ä¸­çš„æ ˆã€‚</p><h2 id="æ•…éšœ"><a href="#æ•…éšœ" class="headerlink" title="æ•…éšœ"></a>æ•…éšœ</h2><p>æ•…éšœç”±é”™è¯¯å¼•èµ·ï¼Œå®ƒå¯èƒ½èƒ½å¤Ÿè¢«æ•…éšœå¤„ç†ç¨‹åºä¿®æ­£ã€‚æ ¹æ®æ•…éšœæ˜¯å¦èƒ½å¤Ÿè¢«ä¿®å¤ï¼Œæ•…éšœå¤„ç†ç¨‹åºè¦ä¹ˆé‡æ–°æ‰§è¡Œå¼•èµ·æ•…éšœçš„æŒ‡ä»¤ï¼Œè¦ä¹ˆç»ˆæ­¢ã€‚</p><p>ä¸€ä¸ªç»å…¸çš„æ•…éšœç¤ºä¾‹æ˜¯<code>ç¼ºé¡µå¼‚å¸¸</code>ï¼Œå½“æŒ‡ä»¤å¼•ç”¨ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œè€Œä¸è¯¥åœ°å€ç›¸å¯¹åº”çš„ç‰©ç†é¡µé¢ä¸åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤å¿…é¡»ä»ç£ç›˜ä¸­è¯»å–æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ•…éšœã€‚ä¸€ä¸ªé¡µé¢å°±æ˜¯è™šæ‹Ÿå†…å­˜ä¸­çš„ä¸€ä¸ªè¿ç»­çš„å—ï¼ˆå…¸å‹çš„æ˜¯4KBï¼‰ï¼Œç¼ºé¡µå¤„ç†ç¨‹åºä»ç£ç›˜åŠ è½½é€‚å½“çš„é¡µé¢ï¼Œç„¶åå°†æ§åˆ¶è¿”å›ç»™å¼•èµ·æ•…éšœçš„æŒ‡ä»¤ã€‚å½“æŒ‡ä»¤å†æ¬¡æ‰§è¡Œæ˜¯ï¼Œç›¸åº”çš„ç‰©ç†é¡µé¢å·²ç»é©»ç•™åœ¨å†…å­˜ä¸­äº†ï¼ŒæŒ‡ä»¤å°±å¯ä»¥æ²¡æœ‰æ•…éšœçš„è¿è¡Œå®Œæˆäº†ã€‚</p><h2 id="ç»ˆæ­¢"><a href="#ç»ˆæ­¢" class="headerlink" title="ç»ˆæ­¢"></a>ç»ˆæ­¢</h2><p>ç»ˆæ­¢æ˜¯ä¸å¯æ¢å¤çš„è‡´å‘½é”™è¯¯é€ æˆçš„ç»“æœï¼Œé€šå¸¸æ˜¯ä¸€äº›ç¡¬ä»¶é”™è¯¯ï¼Œæ¯”å¦‚DRAMæˆ–è€…SRAMä½è¢«æŸåæ—¶å‘ç”Ÿçš„å¥‡å¶é”™è¯¯ã€‚ç»ˆæ­¢å¤„ç†ç¨‹åºä»ä¸å°†æ§åˆ¶è¿”å›ç»™åº”ç”¨ç¨‹åºï¼Œå¤„ç†ç¨‹åºå°†æ§åˆ¶è¿”å›ç»™ä¸€ä¸ªabortä¾‹ç¨‹ï¼Œè¯¥ä¾‹ç¨‹ä¼šç»ˆæ­¢è¿™ä¸ªåº”ç”¨ç¨‹åºã€‚</p><hr><p>å‚è€ƒèµ„æ–™ï¼šã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ç¬¬ä¸‰ç‰ˆP504</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¼‚å¸¸å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š&lt;code&gt;ä¸­æ–­(interrupt)ã€é™·é˜±(trap)ã€æ•…éšœ(fault)ã€ç»ˆæ­¢(abort)&lt;/code&gt;.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th&gt;åŸå› &lt;/th&gt;
&lt;th&gt;å¼‚æ­¥/åŒæ­¥&lt;/th&gt;
&lt;th&gt;è¿”å›è¡Œä¸º&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¸­æ–­&lt;/td&gt;
&lt;td&gt;æ¥è‡ªI/Oè®¾å¤‡çš„ä¿¡å·&lt;/td&gt;
&lt;td&gt;å¼‚æ­¥&lt;/td&gt;
&lt;td&gt;æ€»æ˜¯è¿”å›ä¸‹ä¸€æ¡æŒ‡ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é™·é˜±&lt;/td&gt;
&lt;td&gt;æœ‰æ„çš„å¼‚å¸¸&lt;/td&gt;
&lt;td&gt;åŒæ­¥&lt;/td&gt;
&lt;td&gt;æ€»æ˜¯è¿”å›ä¸‹ä¸€æ¡æŒ‡ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ•…éšœ&lt;/td&gt;
&lt;td&gt;æ½œåœ¨å¯æ¢å¤çš„é”™è¯¯&lt;/td&gt;
&lt;td&gt;åŒæ­¥&lt;/td&gt;
&lt;td&gt;å¯èƒ½è¿”å›åˆ°å½“å‰æŒ‡ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç»ˆæ­¢&lt;/td&gt;
&lt;td&gt;ä¸å¯æ¢å¤çš„é”™è¯¯&lt;/td&gt;
&lt;td&gt;åŒæ­¥&lt;/td&gt;
&lt;td&gt;ä¸ä¼šè¿”å›&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¼‚æ­¥å¼‚å¸¸æ—¶ç”±å¤„ç†å™¨å¤–éƒ¨çš„I/Oè®¾å¤‡ä¸­çš„äº‹ä»¶äº§ç”Ÿçš„ã€‚åŒæ­¥å¼‚å¸¸æ˜¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„ç›´æ¥äº§ç‰©ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://kunxiang.wang/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="http://kunxiang.wang/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>å¸ƒå°”ç¯</title>
    <link href="http://kunxiang.wang/2019/02/15/%E5%B8%83%E5%B0%94%E7%8E%AF/"/>
    <id>http://kunxiang.wang/2019/02/15/å¸ƒå°”ç¯/</id>
    <published>2019-02-15T02:07:21.000Z</published>
    <updated>2019-02-15T02:19:32.592Z</updated>
    
    <content type="html"><![CDATA[<p>å¸ƒå°”ç¯ä¸æ•´æ•°è¿ç®—æœ‰å¾ˆå¤šç›¸åŒå±æ€§ã€‚ä¾‹å¦‚æ•´æ•°è¿ç®—çš„ä¸€ä¸ªå±æ€§æ˜¯æ¯ä¸ªå€¼xéƒ½æœ‰ä¸€ä¸ªåŠ æ³•é€†å…ƒ(additive-inverse)<code>-x</code>, ä½¿å¾—<code>x+(-x)=0</code>ã€‚å¸ƒå°”ç¯ä¹Ÿæœ‰ç±»ä¼¼çš„å±æ€§ï¼Œè¿™é‡Œçš„åŠ æ³•è¿ç®—æ—¶<code>^</code>,ä¸è¿‡è¿™æ—¶æ¯ä¸ªå…ƒç´ çš„åŠ æ³•é€†å…ƒæ˜¯å®ƒè‡ªå·±æœ¬èº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä»»ä½•å€¼aæ¥è¯´ï¼Œ<code>a^a=0</code>, è¿™é‡Œç”¨0è¡¨ç¤ºå…¨0çš„ä½å‘é‡ã€‚</p><p>ç›¸åŒé“ç†è¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„å±æ€§ï¼Œå³<code>(a^b)^a=b</code>ï¼Œè¯¥å±æ€§å¯ä»¥ç”¨æ¥äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„å€¼ï¼Œè€Œä¸éœ€è¦ç¬¬ä¸‰æ–¹å˜é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = a ^ b</span><br><span class="line">b = a ^ b</span><br><span class="line">a = a ^ b</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¸ƒå°”ç¯ä¸æ•´æ•°è¿ç®—æœ‰å¾ˆå¤šç›¸åŒå±æ€§ã€‚ä¾‹å¦‚æ•´æ•°è¿ç®—çš„ä¸€ä¸ªå±æ€§æ˜¯æ¯ä¸ªå€¼xéƒ½æœ‰ä¸€ä¸ªåŠ æ³•é€†å…ƒ(additive-inverse)&lt;code&gt;-x&lt;/code&gt;, ä½¿å¾—&lt;code&gt;x+(-x)=0&lt;/code&gt;ã€‚å¸ƒå°”ç¯ä¹Ÿæœ‰ç±»ä¼¼çš„å±æ€§ï¼Œè¿™é‡Œçš„åŠ æ³•è¿ç®—æ—¶&lt;code&gt;^&lt;/code&gt;,ä¸è¿‡è¿™æ—¶
      
    
    </summary>
    
    
      <category term="è®¡ç®—æœºåŸºç¡€" scheme="http://kunxiang.wang/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
</feed>
